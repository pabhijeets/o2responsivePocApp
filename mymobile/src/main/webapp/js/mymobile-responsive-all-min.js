angular.module("myo2Directives",["compile"]).directive("o2Title",[function(){return{restrict:"AE",replace:!0,template:'<h1 class="paragraph-title-{{size}}">{{text}}</h1>',scope:{text:"=text",size:"=size"}}}]).directive("o2AmountEnlarged",[function(){return{restrict:"AE",replace:!0,template:'<span class="amount">{{value | currencyFormatter:!!poundValue}}</span>',scope:{value:"=value",poundValue:"=poundValue"}}}]).directive("o2Percentage",[function(){return{restrict:"AE",replace:!0,template:"<span>{{value | percentageFormatter}}</span>",
scope:{value:"=value"}}}]).directive("o2Amount",[function(){return{restrict:"AE",replace:!0,template:"<span>{{value | currencyFormatter:!!poundValue}}</span>",scope:{value:"=value",poundValue:"=poundValue"}}}]).directive("o2Date",[function(){return{restrict:"AE",replace:!0,template:"<time>{{value | dateFormatter}}</time>",scope:{value:"=value"}}}]).directive("donutchart2",["$timeout","$compile","$rootScope",function(a,b,c){return{restrict:"E",scope:{percentage:"=percentage",isAboveThreshold:"=isabovethreshold",
isUnlimited:"=isunlimited",lineWidth:"=linewidth",radius:"=radius"},link:function(a,e){var f=a.percentage;a.isUnlimited&&(f=0);if(c.svgSupported){var g={lineWidth:a.lineWidth,radius:a.radius,width:2*a.radius+a.lineWidth+4,height:2*a.radius+a.lineWidth+4,animate:1500,barColor:"#C0C0C0",trackColor:"#032b5a"};angular.extend(g,a.options);a.isAboveThreshold&&(g.trackColor="#FF9900");(new DonutChart(e[0],g)).draw(f)}else{f=100-f.toFixed(0);(g=f%5)&&(f+=5-g);g="big";16>a.radius&&(g="small");var h="blue";
a.isAboveThreshold&&(h="orange");f=b('<span class="donut_'+g+"_"+h+" donut_"+g+"_"+f+'" ></span>')(a);e.append(f)}}}}]).directive("donutchart",["$timeout","$compile","$rootScope",function(a,b,c){return{restrict:"AE",scope:{percentage:"=percentage",isAboveThreshold:"=isabovethreshold",isUnlimited:"=isunlimited",lineWidth:"=linewidth",radius:"=radius"},link:function(a,e){var f=a.percentage;a.isUnlimited&&(f=0);if(c.svgSupported){var g={lineWidth:a.lineWidth,radius:a.radius,width:2*a.radius+a.lineWidth+
4,height:2*a.radius+a.lineWidth+4,animate:1500,barColor:"#C0C0C0",trackColor:"#032b5a"};angular.extend(g,a.options);a.isAboveThreshold&&(g.trackColor="#FF9900");(new DonutChart(e[0],g)).draw(f)}else f=100-f.toFixed(0),(g=f%5)&&(f+=5-g),g="blue",a.isAboveThreshold&&(g="orange"),f=b('<span class="donut_'+g+" donut_"+f+'" ></span>')(a),e.append(f)}}}]).directive("o2Tooltip",["$rootScope",function(a){return{restrict:"A",scope:{tooltipWidth:"@tooltipWidth",tooltipRightOffset:"@tooltipRightOffset"},link:function(b,
c,d){$(c).on("click",c.find("svg"),function(){jqElement=$(c);var e=$(window).width(),f=a.svgSupported?'<div class="tooltip"> <img class="tooltipclose" alt="X" src="'+defaultProperties.assetsURL+'img/default/white_cross.svg" /></div>':'<div class="tooltip"> <img class="tooltipclose" alt="X" src="'+defaultProperties.assetsURL+'img/default/white_cross.png" /></div>',g=b.tooltipWidth||204,h=b.tooltipRightOffset||30,j=function(){$(jqElement.find(".tooltip")[0]).fadeToggle(200)},i=function(){var a=$(f).css({width:g,
display:"none"}),b=jqElement.offset().left;jqElement.offset();diff=e-b-60;b="place-to-right";diff<g+h&&(b="place-to-left");var c,i;"dynamic"===d.o2Tooltip?(c=d.o2TooltipHeading,i=d.o2TooltipContent):(c=defaultProperties.constants[d.o2Tooltip].heading,i=defaultProperties.constants[d.o2Tooltip].text);a.addClass(b).append("<p class='tooltip-heading'>"+c+"</p><p class='tooltip-text'>"+i+"</p>");jqElement.append(a);$("img .tooltipclose").click(function(){jqElement.find(".tooltip").length>0&&$.each(jqElement.find(".tooltip"),
function(a,b){$(b).remove()})});j()};if(0<jqElement.children(".tooltip").length)j(),jqElement.children(".tooltip").remove();else{var k=$("body .tooltip");0<k.length&&$.each(k,function(a,b){$(b).remove()});i()}})}}}]).directive("o2Link",[function(){return{restrict:"A",link:function(a,b,c){disambiguation_id="disambiguation_id="+a.disambiguationId;prameterSeparater="?";0<c.o2Link.indexOf("?")&&(prameterSeparater="&");b.attr("href",a.defaultProperties.mymobileBaseUrl+c.o2Link+prameterSeparater+disambiguation_id)}}}]).directive("placeholder",
function(){return!angular.mock&&void 0!==document.createElement("input").placeholder?{}:{restrict:"A",link:function(){setTimeout(function(){jQ17.placeholder.shim()},0)}}}).directive("o2HeightChangeSource",[function(){return{restrict:"A",link:function(a,b){a.$watch(function(){return b.height()},function(b){a.allowancesDetailsContainerHeight=b-60})}}}]).directive("o2HeightChangeTarget",[function(){return{restrict:"A",link:function(a,b){!a.initialHeight&&b.height()&&(a.initialHeight=b.height());a.$watch("allowancesDetailsContainerHeight",
function(){a.allowancesDetailsContainerHeight>134&&b.css("margin-top",(a.allowancesDetailsContainerHeight-a.initialHeight)/2-30+"px")})}}}]).directive("focusOn",["$timeout","$rootScope",function(){return{restrict:"A",scope:{focusValue:"=focusOn"},link:function(a,b){a.$watch("focusValue",function(c){!0===c?b[0].focus():!1===c&&b[0].blur();a.focusValue=void 0})}}}]).directive("o2svg",["$compile","$rootScope",function(a,b){return{restrict:"AE",scope:{name:"="},replace:!0,link:function(c,d,e){e.tag=e.tag||
"span";var f="",g=["name","fallbackext","tag"];$.each(e.$attr,function(a){-1>=$.inArray(a,g)&&("svgclass"==a?b.svgSupported&&(f+=" class='"+e.svgclass+"'"):"nonsvgclass"==a?b.svgSupported||(f+=" class='"+e.nonsvgclass+"'"):f+=" "+a+"='"+e[a]+"'")});if(b.svgSupported)var h=c.name+".svg",c=a("<"+e.tag+" "+f+" ng-include=\"'"+h+"'\"></"+e.tag+">")(c);else e.fallbackext=e.fallbackext||"png",h=properties.imagesURL+"/"+c.name+"."+e.fallbackext,c=a("<"+e.tag+" "+f+'><img src="'+h+'"/></'+e.tag+">")(c);d.replaceWith(c)}}}]).directive("o2Overlay",
["$compile","$rootScope","$http","$templateCache",function(a,b,c,d){return{restrict:"A",link:function(e,f,g){var h=null,h=b.svgSupported?'  <div  style="display:none" id="o2Overlay" class="overlay-wrapper">\t<div class="overlay-container">  <img id="closeOverlayIcon" class="overlay-close" alt="X" src="'+defaultProperties.assetsURL+'img/default/blue_cross.svg" />  <div class="overlay-content"></div> </div> </div>':'  <div  style="display:none" id="o2Overlay" class="overlay-wrapper">\t<div class="overlay-container">  <img id="closeOverlayIcon" class="overlay-close" alt="X" src="'+
defaultProperties.assetsURL+'img/default/blue_cross.png" />  <div class="overlay-content"></div> </div> </div>',j=ASSET_URL+g.o2Overlay;defaultProperties.constants[g.o2Overlay]&&(j=ASSET_URL+defaultProperties.constants[g.o2Overlay].contentUrl);var i="",k=d.get(j);void 0==k?c.get(j).success(function(b){i=a("<div>"+b+"</div>")(e)}).error(function(){e.template="error"}):i=a(k)(e);var l=g.overlayContainerMargin||60;f.bind("click",function(){var a=function(){$("#o2Overlay").fadeToggle(150)};0==$("body").find("#o2Overlay").length&&
(h=$(h),$(h.find(".overlay-close")[0]).bind("click",function(){a()}),$("body").append(h));(function(){$("body #o2Overlay .overlay-content").html(i);setTimeout(function(){var b=$("body #o2Overlay .overlay-container"),c=$("body #o2Overlay .overlay-container .overlay-content");$(b).parent().css({visibility:"hidden",display:"block"});optionHeight=$(b).height();$(b).parent().css({visibility:"",display:"none"});var d=(document.documentElement.clientHeight-optionHeight-l)/2,e=document.documentElement.clientHeight-
2*l-60;b.css({top:d>l?d:l,"max-height":e});b.addClass("o2overlayIE");c.css("max-height",e-20);a()},50)})()})}}}]).directive("watermark",function(a){return function(b,c,d){var e;e=a(function(){$(c)&&($(c).watermark(d.watermark),a.cancel(e))},250)}}).directive("o2LazyJs",function(){return{restrict:"E",scope:!1,link:function(a,b){b.hide();var c=b.text();(new Function(c))()}}}).directive("masonryBrick",function(){return{restrict:"AC",link:function(a,b){b.imagesLoaded(function(){var a=angular.element(".masonry");
0==angular.element(".masonry-brick").size()&&$timeout(function(){a.masonry("resize")});a.masonry()})}}}).controller("overlayController",["$scope",function(a){a.overlaySwitch=!1;a.showOverlay=function(){a.overlaySwitch=!0};a.hideOverlay=function(){a.overlaySwitch=!1}}]).directive("o2OverlayTarget",["$rootScope",function(a){return{restrict:"A",replace:!0,transclude:!0,template:'<div ng-show="overlaySwitch" class="overlay-wrapper animate-show-hide"> \t\t\t\t\t<div class="'+(Modernizr.csstransforms?"overlay-container-centered":
"overlay-container-centered-lame")+'"> \t\t\t\t\t\t<img ng-click="hideOverlay()" id="closeOverlayIcon" class="overlay-close" alt="X" src="'+defaultProperties.assetsURL+"img/default/blue_cross."+(a.svgSupported?"svg":"png")+'" /> \t\t\t\t\t\t<div class="overlay-content" ng-transclude></div> \t\t\t\t\t</div> \t\t\t\t</div>'}}]);function groupBy(a,b){if(!a||(!b||0==a.length)||!a[0][b])return a;for(var c={},d=0;d<a.length;d++)c[a[d][b]]||(c[a[d][b]]=[]),c[a[d][b]].push(a[d]);return c}
function ieStyleApply(){$(".ie8-table tr:nth-child(odd)").addClass("darkBoxGreyColor-bg");$(".ie8-table tr:nth-child(even)").addClass("lightBoxGrey-bg");$(".ie8-table .grid-row:nth-child(odd)").addClass("darkBoxGreyColor-bg");$(".ie8-table .grid-row:nth-child(even)").addClass("lightBoxGrey-bg");$(".ie8-table-rev tr:nth-child(even)").addClass("darkBoxGreyColor-bg");$(".ie8-table-rev tr:nth-child(odd)").addClass("lightBoxGrey-bg");$(".ie8-table-rev .grid-row:nth-child(even)").addClass("darkBoxGreyColor-bg");
$(".ie8-table-rev .grid-row:nth-child(odd)").addClass("lightBoxGrey-bg");$(".ie8-table-complex tbody:nth-child(even) tr").addClass("boxGreyColor-bg");$(".ie8-table-complex tbody:nth-child(odd) tr").addClass("greyColor-bg");$(".ie8-table-complex tbody:nth-child(odd) .category-details td").addClass("ie8-table-border-bottom");$(".ie8-table-complex tbody:nth-child(even) .category-details td").addClass("ie8-table-border-bottom");$(".ie8-table-complex tbody:nth-child(odd) tr:last-child td").removeClass("ie8-table-border-bottom");
$(".ie8-table-complex tbody:nth-child(even) tr:last-child td").removeClass("ie8-table-border-bottom");$(".ie8-table-complex tbody:nth-child(even) .category-caption td:nth-child(even)").addClass("darkBoxGreyColor-bg");$(".ie8-table-complex tbody:nth-child(even) .category-details td:nth-child(odd)").addClass("darkBoxGreyColor-bg");$(".ie8-table-complex tbody:nth-child(even) .category-details td:first-child").css("background","none").removeClass("ie8-table-border-bottom");$(".ie8-table-complex tbody:nth-child(odd) .category-caption td:nth-child(even)").addClass("lightBoxGrey-bg");
$(".ie8-table-complex tbody:nth-child(odd) .category-details td:nth-child(odd)").addClass("lightBoxGrey-bg");$(".ie8-table-complex tbody:nth-child(odd) .category-details td:first-child").css("background","none").removeClass("ie8-table-border-bottom");$("#top-up-hostory-with-topups tr:nth-child(odd)").addClass("lightBoxGrey-bg");$("#top-up-hostory-with-topups tr:nth-child(even) td:nth-child(even)").addClass("boxGreyColor-bg");$("#top-up-hostory-with-topups tr:nth-child(odd) td:nth-child(even)").addClass("darkBoxGreyColor-bg")}
var ieStyleInterval=setInterval(function(){ieApplyInterval()},3E3);function ieApplyInterval(){$(".grid-row:nth-child(even) , tr:nth-child(even)")&&ieStyleApply()}
angular.module("myo2Filters",[]).filter("dateFormatter",["$filter",function(a){return function(b,c){return c?b?a("date")(b,"dd MMM ''''yy"):null:b?a("date")(b,"dd MMM yyyy"):null}}]).filter("currencyFormatter",["$filter",function(a){return function(b,c){return void 0==b||null==b?"\u00a30.00":c?"\u00a3"+a("number")(b,2):0<=b?"\u00a3"+a("number")(b/100,2):"-\u00a3"+a("number")(-b/100,2)}}]).filter("boltonCurrencyFormatter",["$filter",function(a){return function(b){return 0==b?"Free":a("currencyFormatter")(b)}}]).filter("dataAllowanceFormatter",
function(){return function(a,b,c){var c=c||2,d=Math.pow(10,c),a=a||0,e="KB";1024<=a&&1048576>a?(a/=1024,e="MB"):1048576<=a&&(a/=1048576,e="GB");a*=d;a=b?Math.floor(a):Math.ceil(a);return{allowanceValue:(a/d).toFixed(c),allowanceUnit:e}}}).filter("minutesAllowanceFormatter",function(){return function(a){var a=a||0,b=Math.floor(a/60),b=b.toFixed(),a=a%60;return b+":"+(10>a?"0"+a:a)}}).filter("orderStatusFormatter",function(){return function(a){return defaultProperties.widgets.common.myorders.orderStatus[a]}}).filter("percentageFormatter",
function(){return function(a){return(a||0).toFixed(2)+"%"}}).filter("encode",function(){return function(a){return a=encodeURIComponent(a)}}).filter("stringifyduration",function(){return function(a){if("MONTHLY"===a)return" a month"}});
properties={serviceEndpoints:{getUserDetails:MYMOBILE_BASE_URL+"api/userdetails",paym:{getAvailableBoltons:MYMOBILE_BASE_URL+"api/paymonthly/boltons/getavailableboltons",addBoltons:MYMOBILE_BASE_URL+"api/paymonthly/boltons/addboltons",getDataAllowances:MYMOBILE_BASE_URL+"api/paymonthly/myallowance/data",getMinutesAllowances:MYMOBILE_BASE_URL+"api/paymonthly/myallowance/minutes",getMessagesAllowances:MYMOBILE_BASE_URL+"api/paymonthly/myallowance/messages",getBoltonsSummary:MYMOBILE_BASE_URL+"api/paymonthly/myboltonssummary",
getBillDetails:MYMOBILE_BASE_URL+"api/paymonthly/mybilldetails",getTariff:MYMOBILE_BASE_URL+"api/paymonthly/mytariffandboltons/tariffsummary",getCallingPlan:MYMOBILE_BASE_URL+"api/paymonthly/mytariff/callingplan",getRecentCharges:MYMOBILE_BASE_URL+"api/paymonthly/recentcharges",getUpgradeEligibility:MYMOBILE_BASE_URL+"api/paym/upgradeeligibility",getCCAPhonePlan:MYMOBILE_BASE_URL+"api/paym/ccaphoneplan"},payg:{getBalanceAndAllowance:MYMOBILE_BASE_URL+"api/payandgo/balanceandallowance",getBoltons:MYMOBILE_BASE_URL+
"api/payandgo/boltons",getTariffDetails:MYMOBILE_BASE_URL+"api/payandgo/tariffdetails"}},thresholdBalance:200,errorMessage:"This information is not available at the moment. Please try again later.",headings:{home:"My O2",allowances:"Allowances",callingplan:"Call and text charges",adddataboltons:"Add data Bolt Ons",balanceInformation:"Balance Information",dataInformation:"Data information",paygcallingplan:"Call and text charges",upgradeoptions:"Upgrade options",anniversarydateinfo:"Anniversary date",
phoneplan:"Phone Plan",phoneplaninformation:"Phone plan information"},paygBalanceAndAllowanceWarningMessage:{simplicityNoAllowance:{zeroBalance:"Your balance is zero. Top up to get your next monthly allowance.",balanceLessThanThreshold:"Your balance is running low. Top up to get your next monthly allowance."},pendingRecharge:"Your balance was too low to get your monthly allowance. Top up to get your allowance.",simplicityPaidFor:{inArrears:"Your anniversary date has passed. Your balance was too low, top up to cover the cost of your tariff next month.",
notInArrears:"You need enough balance on <next-payment-date> to cover the cost of your tariff next month."},active:{inArrears:"Your anniversary date has passed. Top up to receive your monthly allowance today.",notInArrears:"Top up by your anniversary date to get your next monthly allowance."}},image:{alertUrl:"icon_alert",warningUrl:"icon_warning"},templateURL:ASSET_URL+"templates/highend",assetsURL:ASSET_URL,imagesURL:ASSET_URL+"img/highend",mylatestbill:{title:"Latest bill",iconType:"img",iconUrl:"icon_bill",
callToAction:"open-close",nextBillMessage:{BILL_DATE_NOT_TODAY:'Your next <billType> will arrive in <span class="bold"><b><daysToNextBill></b></span>, on <span class="bold"><b><nextbillDate></b></span>.',BILL_DATE_TODAY:"Your next <billType> will arrive today."},noBillMessage:'Your latest <billType> amount will appear here once your first bill has been produced on <span class="bold"><time id="firstBillDateValue"><nextbillDate></time></span>.',inTreatmentBillMessage:{summary:"<div class=\"grid-row\"><o2svg svgclass='alert-icon-intreatment' nonsvgclass='alert-icon-intreatment' name=\"'icon_warning'\" fallbackext='png'></o2svg><span id=\"inTreatmentBillSummaryMessage\" class=\"alert-message-comment\">Have you paid your latest bill?</span></div>",
detail:"If you haven't paid your bill, please do it now to keep using your phone. If you have already paid, thank you. Our records take a little while to update."}},myrecentcharges:{title:"Recent charges",iconType:"img",iconUrl:"icon_recentcharges",callToAction:"open-close"},mytariff:{title:"Tariff",iconType:"img",iconUrl:"icon_tariff",callToAction:"open-close"},myboltons:{title:"Bolt Ons",iconType:"img",iconUrl:"icon_boltons",callToAction:"open-close"},callingplan:{title:"Call and text charges",
iconType:"img",iconUrl:"icon_callingplan",callToAction:"new-page",newPageRoute:"/callingplan"},myphoneplan:{title:"Phone Plan",iconType:"img",iconUrl:"icon_phoneplan",callToAction:"new-page",newPageRoute:"/phoneplan"},myupgradeoptions:{title:"Upgrade options",iconType:"img",iconUrl:"icon_upgrade",callToAction:"new-page",newPageRoute:"/upgradeoptions"},paygmytariff:{title:"Tariff",iconType:"img",iconUrl:"icon_tariff",callToAction:"open-close"},paygbalanceandallowance:{title:"Current balance",iconType:"img",
iconUrl:"icon_allowances",callToAction:"open-close",openByDefault:!0},dataallowance:{title:"UK Data",iconType:"donutchart",callToAction:"none",summaryTemplate:"allowancesummary.html",noAllowanceMessage:"There is no UK data allowance included with your tariff. You'll be charged at your standard rate for any data you use.",threshold:80,warningMessage:{CAPPED:"You've almost used all your data allowance. Once it's all used up, you'll be unable to use any more data.",OVERAGE_WITH_BUNDLE:"You've almost used all your data allowance. Once it's all used up, you'll be charged for data at your standard rate.",
WEB_DAILY:'You\'ve almost used all your data allowance. Once it\'s all used up, you\'ll be charged for data at our standard calling rates, see <a class="inline-custom-link" href="#/callingplan">Calling plan</a>.'},criticalMessage:{CAPPED:"You've used all of your data allowance.",OVERAGE_WITH_BUNDLE:"You've used all of your data allowance.  You'll be charged for data at your standard rate.",WEB_DAILY:'You\'ve used all of your data allowance. You\'ll now be charged for data at our standard calling rates, see <a class="inline-custom-link" href="#/callingplan">Calling plan</a>.'}},
minutesallowance:{title:"Minutes",iconType:"donutchart",callToAction:"none",summaryTemplate:"allowancesummary.html",noAllowanceMessage:"There is no minutes allowance included with your tariff. You'll be charged at your standard rate for any minutes you use.",threshold:80,warningMessage:"You are getting close to your minutes allowance limit.",criticalMessage:"You have used all your minutes allowance."},messagesallowance:{title:"Messages",iconType:"donutchart",callToAction:"none",summaryTemplate:"allowancesummary.html",
noAllowanceMessage:"There is no messages allowance included with your tariff. You'll be charged at your standard rate for any messages you send.",threshold:80,warningMessage:"You are getting close to your messages allowance limit.",criticalMessage:"You have used all your messages allowance."},allowanceslink:{title:"Allowances",iconType:"img",iconUrl:"icon_allowances",callToAction:"new-page",newPageRoute:"/allowances"},paygcallingplan:{title:"Call and text charges",iconType:"img",iconUrl:"icon_callingplan",
callToAction:"new-page",newPageRoute:"/paygcallingplan"},paygboltons:{title:"Bolt Ons",iconType:"img",iconUrl:"icon_boltons",callToAction:"open-close",allowanceText:{NOT_APPLICABLE:"N/A",PENDING_RECHARGE:"Top up to use this Bolt On.",BLACKBERRY_DATA_ROAMING_VALID:"You have <EU> of European and <ROW> of Rest of the World data left.",BLACKBERRY_DATA_ROAMING_INVALID:"Unable to display."},statusText:{PENDING_ADDITION_PERIODIC_PAYMENT_DUE:"To be added on anniversary date",PENDING_ADDITION:"To be added",
PENDING_REMOVAL_PERIODIC_PAYMENT_DUE:"To be removed on anniversary date",PENDING_REMOVAL:"To be removed",PENDING_RECHARGE:"Pending recharge. Balance too low",ACTIVE:"Ready for you to use",UNKNOWN:"N/A"}},upgradeEligibility:{paid:{LEASING:['To get a brand new smartphone today, you can fast track upgrade to O2 Refresh by paying <span class="bold">{{paidUpgradeOption.upgradeCost | currencyFormatter:true}}</span> \u2013 this includes a 25% discount on your remaining line rental. Or you can wait until the <span class="bold">{{freeUpgradeOption.eligibilityDate | dateFormatter}}</span> to upgrade for free.',
"Just take your current phone to an O2 shop or call us free from your mobile on 202 so we can send you an envelope to return it to us. Make sure it's sent back in good working condition to avoid any additional charges."],HANDSET_SIMO:['To get a brand new smartphone today, you can fast track upgrade to O2 Refresh by paying <span class="bold">{{paidUpgradeOption.upgradeCost | currencyFormatter:true}}</span> \u2013 this includes a 25% discount on your remaining line rental. Or you can wait until the <span class="bold">{{freeUpgradeOption.eligibilityDate | dateFormatter}}</span> to upgrade for free.',
"To fast track to O2 Refresh, visit our upgrade shop."],CCA:['You can pay <span class="bold">{{paidUpgradeOption.upgradeCost | currencyFormatter:true}}</span> now to pay off your Phone Plan and choose a new phone or you can wait until <span class="bold">{{freeUpgradeOption.eligibilityDate | dateFormatter}}</span> for your free upgrade.',"To upgrade visit the upgrade shop."],HANDSET_SIMO_STAFF:['To get a brand new smartphone today, you can fast track upgrade to O2 Refresh by paying <span class="bold">{{paidUpgradeOption.upgradeCost | currencyFormatter:true}}</span> \u2013 this includes a 25% discount on your remaining line rental. Or you can wait until the <span class="bold">{{freeUpgradeOption.eligibilityDate | dateFormatter}}</span> to upgrade for free.',
"To upgrade now call us on 202 from your mobile."],CCA_STAFF:['You can pay <span class="bold">{{paidUpgradeOption.upgradeCost | currencyFormatter:true}}</span> now to pay off your Phone Plan and choose a new phone or you can wait until <span class="bold">{{freeUpgradeOption.eligibilityDate | dateFormatter}}</span> for your free upgrade.',"To upgrade now call us on 202 from your mobile."]},free:{LEASING:["You can upgrade now. As an existing customer you'll always get our very best deals.","Just take your current phone to an O2 shop or call us free from your mobile on 202 so we can send you an envelope to return it to us. Make sure it's sent back in good working condition to avoid any additional charges."],
HANDSET_SIMO:["You can upgrade now. As an existing customer you'll always get our very best deals.","To fast track to O2 Refresh, visit our upgrade shop."],CCA:["You can upgrade now. As an existing customer you'll always get our very best deals on a new phone and tariff.","To fast track to O2 Refresh, visit our upgrade shop."],HANDSET_SIMO_STAFF:["You can upgrade now. As an existing customer you'll always get our very best deals.","To upgrade now call us on 202 from your mobile."],CCA_STAFF:["You can upgrade now. As an existing customer you'll always get our very best deals on a new phone and tariff.",
"To upgrade now call us on 202 from your mobile."]},noUpgrade:{MBB:"Mobile broadband customers are not eligible for upgrades.",IS_IN_TREATMENT:"You've got an unpaid bill - you can pay this off here. Once that's been sorted, come back here and we'll check to see if you can upgrade then.",IS_SIM_SWAPPED:"Sorry, you can't upgrade at the moment as you've recently changed your sim card. For your security, we ask that you wait at least 24 hours before upgrading. Please try again later.",IS_ORDER_IN_PROGRESS:"We're sorting out your upgrade order. As soon as we're done, we'll update your tariff details and let you know when you can upgrade next.",
DEFAULT:"We're having some problems with our systems. Try again later and we should be able to get your upgrade date.",TARIFF_DOES_NOT_SUPPORT_UPGRADE:"To discuss your upgrade options, please contact Customer Service from your mobile on 202 or 0844 809 0202.",IS_SERVICE_BARRED:"Sorry you can't upgrade at this time. For more information contact Customer Service on 0844 809 0202.",UPGRADE_ENTITLEMENT_SERVICE_UNAVAILABLE:"The Upgrade Entitlement service is not available to the requester."},NO_FREE_TODAY:"You are not eligible for free upgrade today.",
NOT_ELIGIBLE:"You are not eligible for upgrade today."}};
angular.module("myo2","ngRoute ngSanitize payMonthlyTariffService userDetailsService myLatestBillDetailsService recentChargesService allowancesService myBoltonsService addBoltonsService upgradeEligibilityService myPhonePlanService widgetModule userDetailsModule callingPlanModule myAllowancesModule allowanceDetailsModule myLatestBillModule myRecentChargesModule myTariffDetailsModule myBoltonsModule navigationModule addDataBoltOnModule myTariffSummaryModule paygAccountSummaryService paygBoltonsService balanceAndAllowanceSummaryModule myCallingPlanSummaryModule myTariffSummaryModule boltonsSummaryModule upgradeEligibilityModule compile myPhonePlanModule".split(" ")).config(["$routeProvider",function(a){a.when("/",
{templateUrl:"templates/highend/mymobileindex2.html"})}]).run(["$rootScope","$location","$anchorScroll",function(a,b,c){a.$on("$routeChangeSuccess",function(){c()});a.location=b;a.svgSupported=Modernizr.svg}]).controller("rootController",["$rootScope",function(a){a.properties=properties;a.setFullSiteCookie=function(){document.cookie="o2-full-site=true;domain=.o2.co.uk;path=/";window.location=a.desktopSiteRedirectUrl};a.disambiguationId=getParameterByName("disambiguation_id")}]).filter("dateFormatter",
["$filter",function(a){return function(b,c){return c?b?a("date")(b,"dd MMM ''''yy"):null:b?a("date")(b,"dd MMM yyyy"):null}}]).filter("currencyFormatter",["$filter",function(a){return function(b,c){return void 0==b||null==b?"\u00a30.00":c?"\u00a3"+a("number")(b,2):0<=b?"\u00a3"+a("number")(b/100,2):"-\u00a3"+a("number")(-b/100,2)}}]).filter("boltonCurrencyFormatter",["$filter",function(a){return function(b){return 0==b?"Free":a("currencyFormatter")(b)}}]).filter("dataAllowanceFormatter",function(){return function(a,
b,c){var c=c||2,d=Math.pow(10,c),a=a||0,e="KB";1024<=a&&1048576>a?(a/=1024,e="MB"):1048576<=a&&(a/=1048576,e="GB");a*=d;a=b?Math.floor(a):Math.ceil(a);return{allowanceValue:(a/d).toFixed(c),allowanceUnit:e}}}).filter("minutesAllowanceFormatter",function(){return function(a){var a=a||0,b=Math.floor(a/60),b=b.toFixed(),a=a%60;return b+":"+(10>a?"0"+a:a)}}).filter("percentageFormatter",function(){return function(a){return(a||0).toFixed(2)+"%"}}).directive("donutchart",["$timeout","$compile","$rootScope",
function(a,b,c){return{restrict:"E",scope:{percentage:"=percentage",isAboveThreshold:"=isabovethreshold",isUnlimited:"=isunlimited",lineWidth:"=linewidth",radius:"=radius"},link:function(a,e){var f=a.percentage;a.isUnlimited&&(f=0);if(c.svgSupported){var g={lineWidth:a.lineWidth,radius:a.radius,width:2*a.radius+a.lineWidth+4,height:2*a.radius+a.lineWidth+4,animate:1500,barColor:"#C0C0C0",trackColor:"#032b5a"};angular.extend(g,a.options);a.isAboveThreshold&&(g.trackColor="#FF9900");(new DonutChart(e[0],
g)).draw(f)}else{f=100-f.toFixed(0);(g=f%5)&&(f+=5-g);g="big";16>a.radius&&(g="small");var h="blue";a.isAboveThreshold&&(h="orange");f=b('<span class="donut_'+g+"_"+h+" donut_"+g+"_"+f+'" ></span>')(a);e.append(f)}}}}]).directive("script",function(){return{restrict:"E",scope:!1,link:function(a,b,c){"text/javascript-lazy"===c.type&&(a=b.text(),(new Function(a))())}}}).directive("o2svg",["$compile","$rootScope",function(a,b){return{restrict:"E",scope:{name:"="},replace:!0,link:function(c,d,e){e.tag=
e.tag||"span";var f="",g=["name","fallbackext","tag"];$.each(e.$attr,function(a){-1>=$.inArray(a,g)&&("svgclass"==a?b.svgSupported&&(f+=" class='"+e.svgclass+"'"):"nonsvgclass"==a?b.svgSupported||(f+=" class='"+e.nonsvgclass+"'"):f+=" "+a+"='"+e[a]+"'")});if(b.svgSupported)var h=c.name+".svg",c=a("<"+e.tag+" "+f+" ng-include=\"'"+h+"'\"></"+e.tag+">")(c);else e.fallbackext=e.fallbackext||"png",h=properties.imagesURL+"/"+c.name+"."+e.fallbackext,c=a("<"+e.tag+" "+f+'><img src="'+h+'"></img></'+e.tag+
">")(c);d.replaceWith(c)}}}]).config(["$httpProvider",function(a){a.interceptors.push(["$q","$location","$rootScope",function(a,c,d){return{request:function(c){var f=d.disambiguationId;null!=f&&(-1==c.url.indexOf("_assets")&&-1==c.url.indexOf(".svg"))&&(c.url=c.url+"?disambiguation_id="+f);return c||a.when(c)},responseError:function(c){if(401==c.status){var d=c.headers("loginPageUrl");null==d&&(d="");window.location.href=d}return a.reject(c)}}}])}]);
function getParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))}angular.module("angularsupportedtest",[]);function Bolton(a){this.id=a.id;this.name=a.name;this.description=a.description;this.monthlyFee=a.monthlyFee?a.monthlyFee.valueInPence:null;this.selected=!1}
function Boltons(a){this.boltonList=[];for(var b=0;b<a.length;b++)this.boltonList.push(new Bolton(a[b]));this.error=a.error}function MyBolton(a){this.id=a.id;this.name=a.name;this.status=getStatus(a.status);this.boltOnFee=a.monthlyFee?a.monthlyFee.valueInPence:null;this.startDate=a.startDate;this.endDate=a.expiryDate;this.billingInterval=getBillingInterval(a.billingInterval);this.description=a.description}
function getStatus(a){return"ACTIVE"===a?"Active":"PENDING_ADDITION"===a?"Pending for addition":"PENDING_REMOVAL"===a?"Pending for removal":"PENDING_MODIFICATION"===a?"Pending for modification":a}function getBillingInterval(a){if("MONTHLY"===a)return"per month";if("ONE_OFF"===a)return"one-off"}function getTitle(a){if(!a.hasCoreOrPromotionalDataBolton||a.hasCoreDataBolton)return"Data allowance Bolt On";if(a.hasCoreOrPromotionalDataBolton&&!a.hasCoreDataBolton)return"Inclusive Bolt On"}
function MyBoltons(a){this.myboltonList=[];this.myCoreOrPromotionalDataBoltonList=[];this.myDataBoltonList=[];this.otherBoltOnsCount=this.dataBoltOnsCount=0;this.reasonForPendingRemoval=!1;for(var b=0;b<a.length;b++)if("CORE_DATA"===a[b].category||"PROMOTIONAL"===a[b].category)"CORE_DATA"===a[b].category&&(this.hasCoreDataBolton=!0),"ACTIVE"==a[b].status&&(this.hasActiveCoreOrPromotionalDataBolton=!0),this.myCoreOrPromotionalDataBoltonList.push(new MyBolton(a[b])),this.hasCoreOrPromotionalDataBolton=
!0,this.dataBoltOnsCount++;else if("DATA"===a[b].category){var c=new MyBolton(a[b]);this.myDataBoltonList.push(c);this.reasonForPendingRemoval|=c.reasonForPendingRemoval;this.dataBoltOnsCount++}else c=new MyBolton(a[b]),this.myboltonList.push(c),this.reasonForPendingRemoval|=c.reasonForPendingRemoval,this.otherBoltOnsCount++;this.error=a.error;this.collapsed=!0;this.title=getTitle(this);if(2==this.myCoreOrPromotionalDataBoltonList.length&&(a=this.myCoreOrPromotionalDataBoltonList,"CORE_DATA"===a[0].category&&
"CORE_DATA"===a[1].category&&("Pending for addition"===a[0].status&&"Pending for removal"===a[1].status||"Pending for removal"===a[1].status&&"Pending for addition"===a[1].status)))this.hasSwappedCoreDataBoltOn=!0}
function UpgradeEligibility(a){this.isEligibleToday=a.eligibleToday;this.isFreeUpgradeToday=a.freeUpgradeToday;this.freeUpgradeOption=a.freeUpgradeOption;this.paidUpgradeOption=a.paidUpgradeOption;this.tariffClassification=a.tariffClassification;this.tariffFamily=a.tariffFamily;this.eligibilityFailureReasons=a.eligibilityFailureReasons;this.error=a.error;this.isInTreatment=a.inTreatment;this.isSimSwapped=a.simSwapped;this.isOrderInProgress=a.orderInProgress;this.isServiceBarred=a.serviceBarred;this.isTariffSupportsUpgrade=
a.tariffSupportsUpgrade;this.isUgradeEntitlementServiceNotAvailable=a.upgradeEntitlementServiceNotAvailable;a.tariffClassification&&"MBB"==a.tariffClassification&&(this.isMBBUser=!0)}function BillingAddressView(a,b){b.error?this.status="error":(this.houseNumber=b.houseNumber,this.houseName=b.houseName,this.line1=b.line1,this.line2=b.line2,this.town=b.town,this.county=b.county,this.postcode=b.postcode,this.status="success");return this}
function MyLatestBillDetail(a,b,c){this.error=a.error;this.collapsed=!0;this.nextBillDate=a.nextBillDate;this.paymentDueDate=a.paymentDueDate;this.billAmount=a.billAmount?a.billAmount.valueInPence:null;this.currentBalance=a.currentBalance?a.currentBalance.valueInPence:null;this.billDate=a.billDate;this.inTreatment=a.inTreatment;a=(new Date).getTime();this.daysToNextBill=Math.round((this.nextBillDate-a)/864E5);a=this.daysToNextBill+(1<Math.abs(this.daysToNextBill)?" days":" day");b=b("dateFormatter")(this.nextBillDate);
this.nextBillMessage=properties.mylatestbill.nextBillMessage[0!=this.daysToNextBill?"BILL_DATE_NOT_TODAY":"BILL_DATE_TODAY"].replace("<daysToNextBill>",a).replace("<nextbillDate>",b).replace("<billType>",c?"airtime bill":"bill");this.paymentDueDate||(this.noBillMessage=properties.mylatestbill.noBillMessage.replace("<nextbillDate>",b).replace("<billType>",c?"airtime bill":"bill"));this.inTreatment&&(this.inTreatmentBillMessage=properties.mylatestbill.inTreatmentBillMessage)}
function MobileNumbers(a,b){a.status="success";if(!b.error)for(var c=0;c<b.length;c++)this.push(b[c].value)}MobileNumbers.prototype=Object.create(Array.prototype,{});
function UpgradeOptionMessagesHelper(a,b){this.constructMessagesForUpgradeType=function(a,d){var e=[],f=!1;this.contains(a.tariffClassification,"leasing")?e=properties.upgradeEligibility[d].LEASING:b?this.contains(a.tariffClassification,"staff")||this.contains(a.tariffFamily,"staff")?e=properties.upgradeEligibility[d].CCA_STAFF:(f=!0,e=properties.upgradeEligibility[d].CCA):this.contains(a.tariffClassification,"staff")||this.contains(a.tariffFamily,"staff")?e=properties.upgradeEligibility[d].HANDSET_SIMO_STAFF:
(f=!0,e=properties.upgradeEligibility[d].HANDSET_SIMO);return{messages:e,displayUpgradeShop:f}};this.constructMessages=function(a){return a.isEligibleToday?a.isFreeUpgradeToday?this.constructMessagesForUpgradeType(a,"free"):a.paidUpgradeOption&&a.freeUpgradeOption?this.constructMessagesForUpgradeType(a,"paid"):{messages:[properties.upgradeEligibility.noUpgrade.DEFAULT],displayUpgradeShop:!1}:this.constructMessageForNoUpgrade(a)};this.constructMessageForNoUpgrade=function(b){var d=[];"MBB"==b.tariffClassification?
d.push(properties.upgradeEligibility.noUpgrade.MBB):b.isInTreatment?d.push(properties.upgradeEligibility.noUpgrade.IS_IN_TREATMENT):b.isSimSwapped?d.push(properties.upgradeEligibility.noUpgrade.IS_SIM_SWAPPED):b.isOrderInProgress?d.push(properties.upgradeEligibility.noUpgrade.IS_ORDER_IN_PROGRESS):b.freeUpgradeOption&&"FUTURE"==b.freeUpgradeOption.eligibilityTime?(b="You'll be able to upgrade on "+a("dateFormatter")(b.freeUpgradeOption.eligibilityDate)+".",d.push(b)):b.isServiceBarred?d.push(properties.upgradeEligibility.noUpgrade.IS_SERVICE_BARRED):
b.isTariffSupportsUpgrade?b.isUgradeEntitlementServiceNotAvailable?d.push(properties.upgradeEligibility.noUpgrade.UPGRADE_ENTITLEMENT_SERVICE_UNAVAILABLE):d.push(properties.upgradeEligibility.noUpgrade.DEFAULT):d.push(properties.upgradeEligibility.noUpgrade.TARIFF_DOES_NOT_SUPPORT_UPGRADE);return{messages:d,displayUpgradeShop:!1}};this.contains=function(a,b){return-1!=a.toLowerCase().indexOf(b)}}
function UserDetails(a){this.mobileNumber=a.registeredMobileNumber?a.registeredMobileNumber.value:void 0;this.emailAddress=a.emailAddress;this.accountId=a.accountId;this.ismonthly=a.monthlyUser;this.isCCA=a.cca;this.error=a.error}
var calculatePercentageUsed=function(a,b,c){return a||!b?0:100*((c||0)/b)},getAlertMessage=function(a,b,c){var d={},e=properties[a+"allowance"];b>=e.threshold&&100>b?(d.type="warning",d.text="data"==a?e.warningMessage[c]:e.warningMessage):100<=b&&(d.type="alert",d.text="data"==a?e.criticalMessage[c]:e.criticalMessage);return d};
function Allowance(a,b){this.type=a;this.error=b.error||!1;if("data"==a){if(this.isValid=!1,b.dataAllowanceType&&"OVERAGE_WITH_NO_BUNDLE"!=b.dataAllowanceType)if(this.isValid=!0,this.dataAllowanceType=b.dataAllowanceType,-1==b.allowance||"DATA_UNLIMITED"==b.dataAllowanceType||"DAILY_TETHERING"==b.dataAllowanceType||"MONTHLY_TETHERING"==b.dataAllowanceType)this.isUnlimited=!0;else{var c=b.dataAllowanceType||"UNKNOWN";this.isUnlimited=!1;this.expiryDate=b.expiryDate;this.startingBalance=b.allowance;
this.used=b.used;this.remaining=b.remaining;this.percentageUsed=b.percentageUsed;c=getAlertMessage(a,this.percentageUsed,c);this.messageType=c.type;this.warningMessage=c.text}}else"minutes"==a?(this.expiryDate=b.expiryDate,this.startingBalance=b.startingBalance,this.description=b.description,this.used=b.used,this.remaining=b.remaining,this.isUnlimited=b.unlimited,this.percentageUsed=calculatePercentageUsed(this.isUnlimited,this.startingBalance,this.used),c=getAlertMessage(a,this.percentageUsed),this.messageType=
c.type,this.warningMessage=c.text):"messages"==a&&(this.expiryDate=b.expiryDate,this.startingBalance=b.startingBalance,this.description=b.description,this.used=b.used,this.remaining=b.remaining,this.isUnlimited=b.unlimited,this.percentageUsed=calculatePercentageUsed(this.isUnlimited,this.startingBalance,this.used),c=getAlertMessage(a,this.percentageUsed),this.messageType=c.type,this.warningMessage=c.text)}
function TariffDetail(a){this.error=a.error;a.basicContract&&(this.accountNumber=a.basicContract.accountNumber,this.endDate=a.basicContract.endDate,this.minimumTermInMonths=a.basicContract.minimumTermInMonths,this.tariffId=a.basicContract.tariffId,this.tariffName=a.basicContract.tariffName,this.startDate=a.basicContract.startDate,this.monthlyFee=a.basicContract.monthlyFee?a.basicContract.monthlyFee.valueInPence:void 0,this.tariffStartDate=a.basicContract.tariffStartDate,this.description=a.basicContract.description,
this.tariffFamily=a.basicContract.tariffFamily,this.BillingInterval=a.basicContract.BillingInterval,this.leased=a.basicContract.leased,this.mobileBroadBand=a.basicContract.mobileBroadBand,this.hasCoreDataBolton=a.hasCoreDataBolton)}function BaseViewModel(a){console.log("I am walking ",a)}BaseViewModel.prototype.convert=function(){};
function Allowances(){this.allowances={data:[],minutes:[],messages:[]};this.messagesStatus=this.minutesStatus=this.dataStatus="loading";this.addDataAllowance=function(a){this.dataStatus=a.error?"error":"success";(a.isValid||a.error)&&this.allowances.data.push(a)};this.addMinutesAllowance=function(a){this.minutesStatus=a.error?"error":"success";this.allowances.minutes.push(a)};this.addMessagesAllowance=function(a){this.messagesStatus=a.error?"error":"success";this.allowances.messages.push(a)};this.getAllowances=
function(a,b){var c;c=this.allowances[a];if(b&&0<c.length){var d=[];d.push(c[0]);for(var e=1;e<c.length;e++)c[e].warningMessage&&d.push(c[e]);c=d}return c};this.hasAllowances=function(a){return 0<this.allowances[a].length};this.hasSomeAllowances=function(){return 0<this.allowances.data.length||0<this.allowances.minutes.length||0<this.allowances.messages.length};this.errorRetrievingBothMinuteAndMessageAllowances=function(){return 0<this.allowances.minutes.length&&this.allowances.minutes[0].error&&
0<this.allowances.messages.length&&this.allowances.messages[0].error?!0:!1}}
function MyRecentCharges(a){this.error=a.error;this.collapsed=!0;this.voiceCharge=a.voiceCharge?a.voiceCharge.valueInPence:null;this.messageCharge=a.messageCharge?a.messageCharge.valueInPence:null;this.dataCharge=a.dataCharge?a.dataCharge.valueInPence:null;this.internationalCharge=a.internationalCharge?a.internationalCharge.valueInPence:null;this.otherCharge=a.otherCharge?a.otherCharge.valueInPence:null;this.directToBillCharge=a.directToBillCharge?a.directToBillCharge.valueInPence:null;this.totalCharge=
a.totalCharge?a.totalCharge.valueInPence:null;this.userHasBeenBilledBefore=a.userHasBeenBilledBefore?a.userHasBeenBilledBefore:null}
function MyPhonePlan(a,b){b.error?(a.status="error",a.showCallToAction=!1):(a.status="success",b.ccaInfoMessage?(a.showCallToAction=!1,this.ccaInfoMessage=b.ccaInfoMessage):(this.phoneName=b.phoneName,this.startDate=b.startDate,this.installmentDate=b.installmentDate,this.ccaNumber=b.ccaNumber,this.totalCredit=b.totalCredit,this.apr=b.apr,this.duration=b.duration,this.settlementAmount=b.settlementAmount,this.installmentAmount=b.installmentAmount,this.pendingAmount=b.pendingAmount,this.paidToDate=b.paidToDate,
a.showCallToAction=!0))}
function PaygBoltons(a){this.dataBoltons=[];this.otherBoltons=[];this.otherBoltOnsCount=this.dataBoltOnsCount=0;this.dataAndOtherBoltons=[];for(var b=this.dataAndOtherBoltonsCount=0;b<a.length;b++)"WAP"==a[b].boltOnCategory?(this.dataBoltons.push(new PaygBolton(a[b])),this.dataBoltOnsCount++):(this.otherBoltons.push(new PaygBolton(a[b])),this.otherBoltOnsCount++),this.dataAndOtherBoltons.push(new PaygBolton(a[b])),this.dataAndOtherBoltonsCount++;this.groupedDataAndOtherBoltons=groupBy(this.dataAndOtherBoltons,
"categoryText")}
function PaygBolton(a){this.name=a.name;this.status=function(a,b){var e=a;if(("PENDING_ADDITION"==a||"PENDING_REMOVAL"==a)&&b)e+="_PERIODIC_PAYMENT_DUE";return properties.paygboltons.statusText[e]}(a.status,a.hasPendingPeriodicPayment);this.billingInterval=function(a){if("MONTHLY"==a)return"per month";if("ONE_OFF"==a)return"one-off"}(a.billingInterval);this.description=a.description;this.anniversaryDate=a.anniversaryDate;this.boltOnFee=function(a,b,e){if("MONTHLY"==a)return b?b.valueInPence:null;
if("ONE_OFF"==a)return e?e.valueInPence:null}(a.billingInterval,a.monthlyCost,a.oneOffCost);this.allowanceRemainingText=function(a){var b=properties.paygboltons.allowanceText.NOT_APPLICABLE;"ACTIVE"==a.status?a.blackBerryRoamingBoltOn?b=a.europeRemainingAllowance&&a.restOfWorldRemainingAllowance?properties.paygboltons.allowanceText.BLACKBERRY_DATA_ROAMING_VALID.replace("<EU>",a.europeRemainingAllowance).replace("<ROW>",a.restOfWorldRemainingAllowance):properties.paygboltons.allowanceText.BLACKBERRY_DATA_ROAMING_INVALID:
a.allowanceText&&!a.allowanceText.match(/ERR/)&&(b=a.allowanceText):"PENDING_RECHARGE"==a.status&&(b=properties.paygboltons.allowanceText.PENDING_RECHARGE);return b}(a);this.boltOnCategory=a.boltOnCategory;var b=new Date;b.setHours(0,0,0,0);this.isExpiryDateIsPastDate=a.endDate?"PENDING_REMOVAL"==a.status&&b>a.endDate:!1;this.categoryText=getDisplaybleCategoryText(a.boltOnCategory);!0==a.hasSubscriberDataAllowanceAllowance&&!0==a.blackBerryRoamingBoltOn&&(this.goingAbroad={caption:"Going Abroad",
url:"http://international.o2.co.uk/internationaltariffs/travelling_abroad"});a.holdConfigurablePostcode?this.manageAction={caption:"Manage postcode",url:"payandgo/configurepostcode?boltOnId="+a.id}:a.holdConfigurablePhoneNumbers?this.manageAction={caption:"Manage my numbers",url:"payandgo/configureo2numbers?boltOnId="+a.id}:"FAMILY"==a.boltOnCategory?this.manageAction={caption:"Manage Family",url:"family"}:"INTFAV"==a.boltOnCategory&&(this.manageAction={caption:"Manage my numbers",extUrl:"https://if.o2.co.uk/templates/LoginStep1.aspx"});
if("MONTHLY"==a.billingInterval&&("PENDING_RECHARGE"==a.status||"ACTIVE"==a.status))this.action={caption:"Remove",url:"payandgo/mytariffandboltons/confirmremovebolton?boltOnId="+a.id}}
function getDisplaybleCategoryText(a){var b={GENERAL:"Additional Bolt Ons",LANDLINES:"Additional Bolt Ons",YOURO2NOS:"Additional Bolt Ons",WAP:"Web",BBROAM:"BlackBerry",BBBOLTON:"BlackBerry",FAMILY:"Your Family",INTL:"Calling abroad from the UK",INTFAV:"Calling abroad from the UK",HOME:"O2 Home",MSG:"Messaging",TRAVELOFF:"Using your phone abroad",TRAVEL:"Using your phone abroad",EUROPE:"Using your phone abroad"};return b[a]?b[a]:a}
function MyTariffSummary(a){this.error=a.error;this.tariffName=a.currentTariff?a.currentTariff.tariffName:null;this.benefits=a.currentTariff?a.currentTariff.benefits:null}
function BalanceAndAllowanceSummary(a,b){this.error=a.error;this.accountBalance=a.accountBalance?a.accountBalance.valueInPence:null;this.allowanceText=getAllowanceText(a);this.anniversaryDate=a.anniversaryDate;this.imageUrl=this.topupMessage="";if(a.currentTariff)if(a.currentTariff.simplicityNoAllowance)0===this.accountBalance?(this.topupMessage=properties.paygBalanceAndAllowanceWarningMessage.simplicityNoAllowance.zeroBalance,this.imageUrl="alert"):this.accountBalance<=properties.thresholdBalance&&
(this.topupMessage=properties.paygBalanceAndAllowanceWarningMessage.simplicityNoAllowance.balanceLessThanThreshold,this.imageUrl="warning");else if(a.currentTariff.pendingRecharge)this.topupMessage=properties.paygBalanceAndAllowanceWarningMessage.pendingRecharge,this.imageUrl="alert";else if(a.currentTariff.inArrears)a.currentTariff.simplicityPaidFor?(this.topupMessage=properties.paygBalanceAndAllowanceWarningMessage.simplicityPaidFor.inArrears,this.imageUrl="alert"):"ACTIVE"==a.currentTariff.accountStatus&&
(this.topupMessage=properties.paygBalanceAndAllowanceWarningMessage.active.inArrears,this.imageUrl="alert");else if(a.currentTariff.simplicityPaidFor){var c=properties.paygBalanceAndAllowanceWarningMessage.simplicityPaidFor.notInArrears,d=b("dateFormatter")(a.currentTariff.nextPaymentDate);this.topupMessage=c.replace("<next-payment-date>",d)}else"ACTIVE"==a.currentTariff.accountStatus&&(this.topupMessage=properties.paygBalanceAndAllowanceWarningMessage.active.notInArrears)}
function getAllowanceText(a){return null==a.allowanceText||"ERROR"==a.allowanceText||a.currentTariff.pendingRecharge||a.currentTariff.inArrears&&a.currentTariff.simplicityPaidFor?null:a.allowanceText}
angular.module("userDetailsService",[]).service("userDetailsService",["$http",function(a){return{getUserDetails:function(b){a.get(properties.serviceEndpoints.getUserDetails).then(function(a){b(a.data)},function(){b({error:properties.errorMessage})})},getMobileNumbers:function(b){a.get(defaultProperties.serviceEndpoints.common.mobileNumbers).success(function(a){b(a)}).error(function(){b({error:!0})})},getBillingAddress:function(b){a.get(defaultProperties.serviceEndpoints.common.billingAddress).success(function(a){b(a)}).error(function(){b({error:!0})})}}}]);
angular.module("addBoltonsService",[]).service("addBoltonsService",["$http",function(a){return{getAvailableOneOffBoltons:function(b){a.get(properties.serviceEndpoints.paym.getAvailableBoltons).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})},addBoltOns:function(b,c){a.post(properties.serviceEndpoints.paym.addBoltons,b).success(function(a){c(a)}).error(function(){c({error:properties.errorMessage})})}}}]);
angular.module("recentChargesService",[]).service("recentChargesService",["$http",function(a){return{getRecentCharges:function(b){a.get(properties.serviceEndpoints.paym.getRecentCharges).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})}}}]);angular.module("myLatestBillDetailsService",[]).service("myLatestBillDetailsService",["$http",function(a){return{getBillDetails:function(b){a.get(properties.serviceEndpoints.paym.getBillDetails).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})}}}]);
angular.module("payMonthlyTariffService",[]).service("payMonthlyTariffService",["$http",function(a){return{getTariffDetail:function(b){a.get(properties.serviceEndpoints.paym.getTariff).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})},getCallingPlan:function(b){a.get(properties.serviceEndpoints.paym.getCallingPlan).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})}}}]);
angular.module("upgradeEligibilityService",[]).service("upgradeEligibilityService",["$http",function(a){return{getUpgradeEligibility:function(b){a.get(properties.serviceEndpoints.paym.getUpgradeEligibility).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})}}}]);calculatePercentageUsed=function(a,b,c){return a||!b?0:100*((c||0)/b)};
angular.module("allowancesService",[]).service("allowancesService",["$http",function(a){return{getDataAllowance:function(b){a.get(properties.serviceEndpoints.paym.getDataAllowances).success(function(a){a.dataAllowanceSummary=a.dataAllowanceSummary||{};a.dataAllowanceSummary.dataAllowanceType=a.dataAllowanceType;b(a.dataAllowanceSummary)}).error(function(){b({error:!0})})},getMinutesAllowance:function(b){a.get(properties.serviceEndpoints.paym.getMinutesAllowances).success(function(a){b(a.allowanceDetails)}).error(function(){b({error:!0})})},
getMessagesAllowance:function(b){a.get(properties.serviceEndpoints.paym.getMessagesAllowances).success(function(a){b(a.allowanceDetails)}).error(function(){b({error:!0})})}}}]);angular.module("myPhonePlanService",[]).service("myPhonePlanService",["$http",function(a){return{getDetails:function(b){a.get(properties.serviceEndpoints.paym.getCCAPhonePlan).success(function(a){b(a)}).error(function(){b({error:!0})})}}}]);angular.module("myBoltonsService",[]).service("myBoltonsService",["$http",function(a){return{getBoltonsSummary:function(b){a.get(properties.serviceEndpoints.paym.getBoltonsSummary).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})}}}]);
angular.module("paygAccountSummaryService",[]).service("paygAccountSummaryService",["$http",function(a){return{getSummary:function(b){a.get(properties.serviceEndpoints.payg.getBalanceAndAllowance).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})}}}]);angular.module("paygBoltonsService",[]).service("paygBoltonsService",["$http",function(a){return{getBoltons:function(b){a.get(properties.serviceEndpoints.payg.getBoltons).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})}}}]);
angular.module("myBoltonsModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/boltonsdetails",{controller:"myBoltonsController.getBoltonsSummary",templateUrl:"templates/highend/myboltonsdetails.html"})}]).controller("myBoltonsController.getBoltonsSummary",["$scope","myBoltonsService",function(a,b){b.getBoltonsSummary(function(b){0!=b.length?(a.myBoltons=new MyBoltons(b),a.showCallToAction=0==a.myBoltons.myCoreOrPromotionalDataBoltonList.length&&0==a.myBoltons.myDataBoltonList.length&&
0==a.myBoltons.myboltonList.length?!1:!0):a.showCallToAction=!1;a.status=b.error?"error":"success"})}]);angular.module("compile",[]).config(["$compileProvider",function(a){a.directive("compile",["$compile",function(a){return function(c,d,e){c.$watch(function(a){return a.$eval(e.compile)},function(e){d.html(e);a(d.contents())(c)})}}])}]);
angular.module("myRecentChargesModule",[]).controller("myRecentChargesController.getSummary",["$scope","recentChargesService",function(a,b){b.getRecentCharges(function(b){a.recentCharges=new MyRecentCharges(b);b.error?a.status="error":(a.status="success",0!=a.recentCharges.totalCharge&&(a.showCallToAction=!0))})}]);
angular.module("upgradeEligibilityModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/upgradeoptions",{controller:"upgradeEligibilityController.getOptions",templateUrl:"templates/highend/upgradeoptiondetails.html"})}]).controller("upgradeEligibilityController.getOptions",["$scope","$rootScope","$filter","upgradeEligibilityService",function(a,b,c,d){d.getUpgradeEligibility(function(d){d=new UpgradeEligibility(d);if(d.error)a.status="error";else{a.status="success";a.showCallToAction=
!0;var f=(new UpgradeOptionMessagesHelper(c,b.userDetails.isCCA)).constructMessages(d);f.messages[0]===properties.upgradeEligibility.noUpgrade.DEFAULT&&(a.showCallToAction=!1);d.isMBBUser&&(b.isMBBUser=d.isMBBUser);a.upgradeEligibilityMessages=f.messages;a.displayUpgradeShop=f.displayUpgradeShop;a.freeUpgradeOption=d.freeUpgradeOption;a.paidUpgradeOption=d.paidUpgradeOption}})}]);angular.module("widgetModule",[]).controller("widgetController.doNothing",function(){});
angular.module("allowanceDetailsModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/allowances",{templateUrl:"templates/highend/allowances.html"})}]).config(["$routeProvider",function(a){a.when("/dataInformation",{templateUrl:"templates/highend/datainformation.html"})}]).controller("allowanceDetailsController.setInLocalScope",["$scope",function(a){a.title=a.allowance.description;a.status=a.allowance.error?"error":"success";a.allowance=a.allowance}]).controller("allowanceDetailsController.watchLoadingStatus",
["$scope",function(a){a.$watch("loading == 3",function(){3==a.loading&&(a.status="success",a.showCallToAction=!0)})}]);
angular.module("myAllowancesModule",[]).controller("myAllowancesController.getSummary",["$scope","allowancesService",function(a,b){a.allowances=new Allowances;a.loading=0;var c=function(a,b,c){"minutes"==c?a.addMinutesAllowance(new Allowance(c,b)):"messages"==c&&a.addMessagesAllowance(new Allowance(c,b))},d=function(a,b,d){if(a.error)c(d,a,b);else for(var h=0;h<a.length;h++)c(d,a[h],b)};b.getDataAllowance(function(b){b&&a.allowances.addDataAllowance(new Allowance("data",b));a.loading++;3==a.loading&&
(a.status="success");"error"!=a.allowances.dataStatus&&(a.allowances.dataStatus="success")});b.getMinutesAllowance(function(b){b&&d(b,"minutes",a.allowances);a.loading++;3==a.loading&&(a.status="success");"error"!=a.allowances.minutesStatus&&(a.allowances.minutesStatus="success")});b.getMessagesAllowance(function(b){b&&d(b,"messages",a.allowances);a.loading++;3==a.loading&&(a.status="success");"error"!=a.allowances.messagesStatus&&(a.allowances.messagesStatus="success")})}]);
angular.module("addDataBoltOnModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/adddataboltons",{controller:"addDataBoltOn.getBoltOns",templateUrl:"templates/highend/adddataboltons.html"})}]).controller("addDataBoltOn.getBoltOns",["$scope","$location","$anchorScroll","allowancesService","addBoltonsService",function(a,b,c,d,e){a.currentView="select";a.disableAddBoltonButton=!0;var f=a.selectedBoltOns=[];a.totalOneOffCost=0;a.loading=0;a.boltonCompletionLoading=!0;
d.getDataAllowance(function(b){b&&(a.allowance=new Allowance("data",b),a.status=a.allowance.error?"error":"success");a.loading++});e.getAvailableOneOffBoltons(function(b){a.availableBoltons=new Boltons(b);a.loading++});a.goToAllowancesPage=function(){b.path("/allowances");c()};a.boltonSelected=function(b){b.selected?(a.totalOneOffCost+=b.monthlyFee,f.push(b.id)):(a.totalOneOffCost-=b.monthlyFee,f.splice(f.indexOf(b.id),1))};a.add=function(){a.currentView="confirm";c()};a.goToSelectionPage=function(){a.currentView=
"select";c()};a.confirm=function(){e.addBoltOns(f,function(b){a.addBoltOnsResult=b;a.boltonCompletionLoading=!1});a.currentView="success";c()}}]);
angular.module("myPhonePlanModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/phoneplan",{controller:"myPhonePlanController.getDetails",templateUrl:"templates/highend/myphoneplanpage.html"})}]).controller("myPhonePlanController.getDetails",["$scope","myPhonePlanService",function(a,b){b.getDetails(function(b){a.myPhonePlan=new MyPhonePlan(a,b)})}]);
angular.module("myLatestBillModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/balanceInformation",{templateUrl:"templates/highend/balanceinformation.html"})}]).controller("myLatestBillController.getSummary",["$scope","$rootScope","myLatestBillDetailsService","$filter",function(a,b,c,d){c.getBillDetails(function(c){a.myLatestBillDetail=new MyLatestBillDetail(c,d,b.userDetails.isCCA);if(c.error)a.status="error";else if(a.status="success",b.userDetails.isCCA&&(a.title=
"Latest airtime bill"),null!=a.myLatestBillDetail.paymentDueDate&&(a.showCallToAction=!0),a.myLatestBillDetail.inTreatment)a.additionalSummary=a.myLatestBillDetail.inTreatmentBillMessage.summary})}]);angular.module("callingPlanModule",[]).controller("callingPlanController.getCallingPlan",["$scope",function(a){a.someValue="someValue"}]);
angular.module("myTariffDetailsModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/callingplan",{controller:"myTariffAndBoltonsController.getCallingPlan",templateUrl:"templates/highend/mycallingplan.html"}).when("/tariffdetails",{controller:"myTariffAndBoltonsController.getTariffDetails",templateUrl:"templates/highend/mytariffdetails.html"})}]).controller("myTariffAndBoltonsController.getTariffDetails",["$scope","payMonthlyTariffService",function(a,
b){b.getTariffDetail(function(b){a.tariffDetail=new TariffDetail(b);b.error?a.status="error":(a.status="success",a.showCallToAction=!0)})}]).controller("myTariffAndBoltonsController.getCallingPlan",["$scope","payMonthlyTariffService",function(a,b){b.getCallingPlan(function(b){a.callingPlan=b;a.status=b.error?"error":"success"})}]);
angular.module("userDetailsModule",[]).controller("userDetailsController.getUserDetails",["$scope","$rootScope","userDetailsService",function(a,b,c){c.getUserDetails(function(c){b.userDetails=new UserDetails(c);a.app.pageLoading=!1})}]).controller("userDetailsController.getMobileNumbers",["$scope","userDetailsService",function(a,b){b.getMobileNumbers(function(b){a.mobileNumbers=new MobileNumbers(a,b)})}]).controller("userDetailsController.getBillingAddress",["$scope","userDetailsService",function(a,
b){a.billingAddressView={status:"loading"};b.getBillingAddress(function(b){a.billingAddressView=new BillingAddressView(a,b)})}]);
angular.module("navigationModule",[]).controller("navigationController",["$scope","$location","$rootScope",function(a,b,c){c.desktopSiteRedirectUrl=a.app.desktopSiteRedirectUrl+"?disambiguation_id="+c.disambiguationId;a.linkClass=function(a,c){var f=b.path().substring(1)||"home";return(a===f?"selectedNavLink":"navLink")+"-"+c};a.getHeading=function(){var a=b.path().substring(1)||"home";return properties.headings[a]}}]);
angular.module("boltonsSummaryModule",[]).controller("boltonsController.getSummary",["$scope","paygBoltonsService",function(a,b){b.getBoltons(function(b){b.error?a.status="error":(a.status="success",a.paygBoltons=new PaygBoltons(b),a.showCallToAction=0!=b.length?!0:!1)})}]);
angular.module("balanceAndAllowanceSummaryModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/anniversarydateinfo",{templateUrl:"templates/highend/payg/anniversarydateinfo.html"})}]).controller("balanceAndAllowanceSummaryController.getSummary",["$scope","$filter","paygAccountSummaryService",function(a,b,c){c.getSummary(function(c){a.balanceAndAllowanceSummary=new BalanceAndAllowanceSummary(c,b);a.status=c.error?"error":"success"})}]);
angular.module("myTariffSummaryModule",[]).controller("myTariffSummaryController.getSummary",["$scope","paygAccountSummaryService",function(a,b){b.getSummary(function(b){a.tariffSummary=new MyTariffSummary(b);b.error?a.status="error":(a.status="success",a.showCallToAction=!0)})}]);
angular.module("myCallingPlanSummaryModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/paygcallingplan",{controller:"myCallingPlanSummaryController.getSummary",templateUrl:"templates/highend/mycallingplan.html"})}]).controller("myCallingPlanSummaryController.getSummary",["$scope","paygAccountSummaryService",function(a,b){b.getSummary(function(b){a.callingPlan=b.currentTariff?b.currentTariff.callingPlanDetails:null;b.error?(a.status="error",a.showCallToAction=!1):
(a.status="success",a.showCallToAction=!0)})}]);showMore=function(a){a.preventDefault();a.stopPropagation();var a=jQuery(a.currentTarget),b=a.closest("ul");b.show();b.children("li").show();a.parent().hide()};
showMoreSecondary=function(a){a.preventDefault();a.stopPropagation();jQuery(".overflow-menu").css({"margin-left":0});var b=jQuery(".overflow-menu"),a=jQuery(a.currentTarget),c=a.children("ul");b.find("li a").attr("tabIndex",0);a.addClass("is-hover");c.show();a=b.width();c=jQuery("#nav-secondary").find(".show-more").innerWidth()-2;b.css({"margin-left":-a+c+"px"})};
hideMoreSecondary=function(a){a.preventDefault();a.stopPropagation();var a=jQuery(a.currentTarget),b=a.children("ul");a.removeClass("is-hover");b.hide()};hideMoreSecondaryOnFocusOut=function(){window.setTimeout(function(){var a=jQuery(document.activeElement).parents(),b=jQuery("#nav-secondary").find(".show-more");a.is(".show-more")||b.trigger("mouseleave")},50)};reloadPage=function(a){document.location.href=a.currentTarget.href};
highlightCurrentPageInNav=function(){var a=document.location.href,b=jQuery("#nav-secondary").find("a"),c=[];""!=document.location.hash&&(a=a.substring(0,a.indexOf("#")));for(var a=a.substring(0,a.indexOf("?")),d=0;d<b.length;d++)b[d].href.substring(0,b[d].href.indexOf("?"))==a&&"More"!=b[d].innerHTML&&c.push(b[d]);c=jQuery(c);-1===a.indexOf("errors/404")&&0<c.size()&&(a=c.last(),0<a.size()&&(a=a.closest("li"),a.closest("ul"),a.addClass("is-active")))};
defaultProperties={templateURL:ASSET_URL+"templates/default",assetsURL:ASSET_URL,mymobileBaseUrl:MYMOBILE_BASE_URL,errorMessage:"This information is not available at the moment. Please try again later.",customErrorMessage:{paperFreeBillingSetupError:"Sorry, we could not switch you to paper-free billing. Please try again later.",paperFreeBillingFetchError:"Your paper-free billing preference is not available at the moment. Please try again later.",viewpaymentdetails:"Your payment details are not available at the moment. Please try again later.",
pinCreationFailure:"Sorry, there was an error updating your PIN information. Please try again later.",pinResetFailure:"Sorry, there was an error updating your PIN information. Please try again later.",pinChangeFailure:"Sorry, there was an error updating your PIN information. Please try again later.",changePaymentDetailsError:"Sorry, there was an error updating your payment details. Please try again later.",pinAttemptsExceeded:"You have incorrectly entered your PIN three times.",pinAttemptsExceeded_secondLine:"Your payment details are now locked, in order to proceed please logout and try again later.",
offerDetailsError:"There was an error updating your offer preference. Please try again later."},serviceEndpoints:{common:{phoneDetails:MYMOBILE_BASE_URL+"api/default/phonedetails",myOrders:MYMOBILE_BASE_URL+"api/myorders",mobileNumbers:MYMOBILE_BASE_URL+"api/userdetails/mobilenumbers",billingAddress:MYMOBILE_BASE_URL+"api/userdetails/billingaddress",offers:MYMOBILE_BASE_URL+"api/offers"},paym:{validatePin:MYMOBILE_BASE_URL+"api/paymonthly/validatepin",paymentType:MYMOBILE_BASE_URL+"api/paymonthly/paymenttype",
paymentdetials:{changepaymentdetails:{creditcard:MYMOBILE_BASE_URL+"api/paymonthly/paymentdetails/creditcard/change",directdebit:MYMOBILE_BASE_URL+"api/paymonthly/paymentdetails/directdebit/change"}},getPaperFreeBilling:MYMOBILE_BASE_URL+"api/paymonthly/paperfreebilling",setPaperFreeBilling:MYMOBILE_BASE_URL+"api/paymonthly/setuppaperfreebilling",createPin:MYMOBILE_BASE_URL+"api/paymonthly/security/pin/create",resetPin:MYMOBILE_BASE_URL+"api/paymonthly/security/pin/reset",changePin:MYMOBILE_BASE_URL+
"api/paymonthly/security/pin/change",getpendingtariff:MYMOBILE_BASE_URL+"api/paymonthly/mypendingtariff",getswappabletravelboltons:MYMOBILE_BASE_URL+"api/paymonthly/swappabletravelbolton",getswappableboltons:MYMOBILE_BASE_URL+"api/paymonthly/swappabledataboltons",getswappableo2travelboltons:MYMOBILE_BASE_URL+"api/paymonthly/swappabletravelbolton"},payg:{topuphistory:MYMOBILE_BASE_URL+"api/payandgo/topup/history",rewards:MYMOBILE_BASE_URL+"api/payandgo/rewards"}},constants:{mylatestbill:{contentUrl:"templates/default/common/overlay.html"},
billsummarydetails:{contentUrl:"_assets/templates/default/paym/paperfreebilloverlay.html"},dataallowance:{heading:"Data Allowance",text:"data alowances"},minuteallowance:{heading:"Minute Allowance",text:"Minutes allowances"},phoneDetailsIMEI:{heading:"What is the IMEI number?",text:"The International Mobile Equipment Identifier is unique to your phone and will be useful to the police if your phone is ever lost or stolen."},phoneDetailsPUK:{heading:"What is the PUK number?",text:"The PUK is your Personal Unblocking Key. If you enter your PIN number incorrectly three times the phone will be blocked, but you can use this code to unlock it."}},
widgets:{common:{phonedetails:{title:"Phone details",titleSize:"small",iconUrl:null,showBgImage:!1},myorders:{title:"Recent orders",titleSize:"small",iconUrl:null,showBgImage:!1,orderStatus:{IN_PROGRESS:"In Progress",CANCELLED:"Cancelled",COMPLETE:"Complete"}},offers:{title:"Offers just for you",titleSize:"small"}},paym:{mylatestbill:{title:"Latest bill",titleSize:"large",iconUrl:"_assets/img/highend/icon_bill.png",showBgImage:!0,iconClass:"mylatestbill-icon"},phoneplan:{title:"Phone Plan",titleSize:"large",
iconUrl:"_assets/img/highend/icon_phoneplan.png",iconClass:"phoneplan-icon"},changeCreditCardDetails:{title:"Enter your new credit card details",titleSize:"medium",showBgImage:!1},viewpaymentdetails:{title:"Payment details",titleSize:"medium",iconUrl:"_assets/img/highend/icon_paymentdetails.png",showBgImage:!0,iconClass:"paymentdetails-icon"},myrecentcharges:{title:"Recent charges",titleSize:"large",iconUrl:"_assets/img/highend/icon_recentcharges.png",showBgImage:!1,iconClass:"myrecentcharges-icon"},
myallowances:{title:"Allowances",titleSize:"large",grouped:"stacked-first-unit",iconUrl:"_assets/img/highend/icon_allowances.png",showBgImage:!1,iconClass:"myallowances-icon"},mytariff:{title:"Tariff",titleSize:"medium",hideIcon:!0,iconUrl:null},myboltons:{title:"Bolt Ons",titleSize:"medium",grouped:"stacked-last-unit",hideIcon:!0,iconUrl:null},myupgradeoptions:{title:"Upgrade options",titleSize:"large",iconUrl:"_assets/img/highend/icon_upgrade.png",showBgImage:!0,iconClass:"myupgradeoptions-icon"},
billsummarydetails:{titleSize:"medium"},tariffsummarydetails:{title:"Tariff",titleSize:"medium"},pendingtariffsection:{title:"Your new tariff",titleSize:"medium"},pendingtariffsummarydetails:{title:"Tariff",titleSize:"medium"},pendingtariffboltons:{title:"Including these additional Bolt Ons",titleSize:"small"},tariffdetails:{title:"Tariff details",titleSize:"small"},coreorpromoboltonsummarydetails:{title:"Data allowance Bolt On",titleSize:"small"},dataallowance:{title:"UK data",iconType:"donutchart",
callToAction:"none",summaryTemplate:"allowancesummary.html",noAllowanceMessage:"There is no UK data allowance included with your tariff. You'll be charged at your standard rate for any data you use.",threshold:80,warningMessage:{CAPPED:"You've almost used all your data allowance. Once it's all used up, you'll be unable to use any more data.",OVERAGE_WITH_BUNDLE:"You've almost used all your data allowance. Once it's all used up, you'll be charged for data at your standard rate for any data you use.",
WEB_DAILY:'You\'ve almost used all your data allowance. Once it\'s all used up, you\'ll be charged for data at our standard calling rates, see <a class="inline-custom-link" href="#/callingplan">Calling plan</a>.'},criticalMessage:{CAPPED:"You've used all of your data allowance. Add a data Bolt On to continue using data.",OVERAGE_WITH_BUNDLE:"You've used all of your data allowance. You'll be charged for data at your standard rate for any data you use.",WEB_DAILY:'You\'ve used all of your data allowance. You\'ll now be charged for data at our standard calling rates, see <a class="inline-custom-link" href="#/callingplan">Calling plan</a>.'}},
minutesallowance:{title:"Minutes",iconType:"donutchart",callToAction:"none",summaryTemplate:"allowancesummary.html",noAllowanceMessage:"There is no minutes allowance included with your tariff. You'll be charged at your standard rate for any minutes you use.",threshold:80,warningMessage:"You are getting close to your minutes allowance limit.",criticalMessage:"You have used all your minutes allowance."},messagesallowance:{title:"Messages",iconType:"donutchart",callToAction:"none",summaryTemplate:"allowancesummary.html",
noAllowanceMessage:"There is no messages allowance included with your tariff. You'll be charged at your standard rate for any messages you send.",threshold:80,warningMessage:"You are getting close to your messages allowance limit.",criticalMessage:"You have used all your messages allowance."},allowanceslink:{title:"Allowances",iconType:"img",iconUrl:ASSET_URL+"img/highend/icon_allowances.png",callToAction:"new-page",newPageRoute:"/allowances",widgetText:"Tarrif, Bolt Ons and Calling Plan"},billingaddress:{title:"Billing addresses",
titleSize:"medium"}},payg:{paygtariff:{title:"Tariff",titleSize:"large",iconType:"img",iconUrl:ASSET_URL+"img/default/icon_tariff.png",callToAction:"new-page",newPageRoute:"/tariff",widgetText:"Tariff",iconClass:"payg-icon"},balanceandallowance:{title:"Current balance",titleSize:"large",iconType:"img",iconUrl:ASSET_URL+"img/highend/icon_allowances.png",showBgImage:!0,iconClass:"payg-icon-balance-allowance"},boltons:{title:"Bolt Ons",titleSize:"large",iconType:"img",iconUrl:ASSET_URL+"img/highend/icon_boltons.png",
iconClass:"payg-icon-boltons"},rewards:{title:"My O2 Rewards",titleSize:"small",callToAction:"new-page",newPageRoute:"/tariff",signupLink:"http://payandgorewards.o2.co.uk/",o2rewardsLink:"http://payandgorewards.o2.co.uk/"},tariffdetails:{title:"Tariff",titleSize:"medium",status:{ACTIVE:"Active",PENDING_RECHARGE:"Awaiting top up",PENDING_REMOVAL:{nextPaymentDateInPast:"To be removed",nextPaymentDateNotInPast:"To be removed on anniversary date"},OTHER:"N/A"}},boltonsdetail:{title:"Your additional Bolt Ons",
titleSize:"medium"},callingplan:{title:"Calling plan",titleSize:"small"}}},phoneDetailsMessage:{gprsAndMMSSupported:"Your mobile device is capable of having mobile internet (GPRS WAP) and picture messaging (MMS).",onlyGPRSSupported:"Your mobile device is capable of having mobile internet (GPRS WAP).",onlyMMSSupported:"Your mobile device is capable of having picture messaging (MMS).",gprsAndMMSNotSupported:"Your mobile device is not capable of having mobile internet(GPRS WAP) and picture messaging. Please contact Customer Service for help with this."}};
function MyRecentOrders(a,b){b.error?(a.status="error",a.showCallToAction=!1):(a.showCallToAction=!0,a.status="success",this.orders=b.current)}function Offers(a,b){a.status=b.error?"error":"success";this.offers=b}function OfferPreference(a,b){this.selectedOfferId=a;this.selectedAction=b}
function PhoneDetails(a,b){b.error?(a.status="error",a.showCallToAction=!1):(a.showCallToAction=!0,a.status="success",this.brand=b.brand,this.model=b.model,this.imei=b.imei,this.pukCode=b.pukCode,this.gprsAndMMSSupportMessage=b.gprsSupported&&b.mmsSupported?defaultProperties.phoneDetailsMessage.gprsAndMMSSupported:b.gprsSupported?defaultProperties.phoneDetailsMessage.onlyGPRSSupported:b.mmsSupported?defaultProperties.phoneDetailsMessage.onlyMMSSupported:defaultProperties.phoneDetailsMessage.gprsAndMMSNotSupported)}
function PaymBolton(a){this.id=a.id;this.name=a.name;this.status=getStatus(a.status);this.boltOnFee=a.monthlyFee?a.monthlyFee.valueInPence:null;this.startDate=a.startDate;this.endDate=a.expiryDate;this.billingInterval=getBillingInterval(a.billingInterval);this.description=a.description;this.category=a.category;this.displayCategory=getPayMDisplaybleCategoryText(a.category);this.reasonForPendingRemoval=showReasonForPendingRemoval(a.expiryDate,this.status);this.internationalFavourite=a.internationalFavourite;
this.tugo=a.tugo;this.action=getBoltonAction(a);this.cancelToken=a.cancelToken;this.immediate=a.immediate;this.exclusiveGroups=a.exclusiveGroups}
function getBoltonAction(a){return a.family?{caption:"Manage",url:"family"}:"ACTIVE"===a.status&&a.o2Travel?{caption:"Swap",url:""}:isRemovableBolton(a)?{caption:"Remove",url:"paymonthly/mytariffandboltons/removebolton?boltonIdToRemove="+a.id}:"PENDING_ADDITION"===a.status&&null!=a.cancelToken&&!a.immediate&&!a.o2WebDaily?{caption:"Cancel",url:"paymonthly/mytariffandboltons/cancelboltonchange?boltonIdToCancel="+a.id}:null}
function isRemovableBolton(a){return"ACTIVE"===a.status&&!1===a["default"]&&"Family Subscription"!==a.classification&&"Family Discount"!==a.classification&&"Bar"!==a.classification&&"Billing Option"!==a.classification&&"Insurance"!==a.classification&&"Supplementary Service"!==a.classification&&"Subscription Discount"!==a.classification&&(a.monthlyFee?0!==a.monthlyFee.valueInPence:!1)&&!1===a.oneOff&&!1===a.tugo}
function getPayMDisplaybleCategoryText(a){var b={ADDITIONAL:"Additional Bolt Ons",CALLING_ABROAD:"Calling abroad from the UK",CALLING_FROM_ABROAD:"Calling when abroad",CALLING_IN_EUROPE:"Calling when in Europe",DATA:"Data",DATA_ABROAD:"Using your phone abroad",CORE_DATA:"Data Allowance",SUPPORT:"Support",MESSAGING:"Messaging",PROMOTIONAL:"Promotional",YOUR_FAMILY:"Your Family"};return b[a]?b[a]:a}
function showReasonForPendingRemoval(a,b){if("Pending for removal"===b){var c=new Date;c.setHours(0,0,0,0);var d=new Date(a);return a?d<c:!1}return!1}function getStatus(a){return"ACTIVE"===a?"Active":"PENDING_ADDITION"===a?"Pending for addition":"PENDING_REMOVAL"===a?"Pending for removal":"PENDING_MODIFICATION"===a?"Pending for modification":a}
function getIsMutexWithAnyPendingAdditionBoltOn(a,b){var c=merge(a,b);each(a,function(a){"Pending for removal"===a.status&&(null!=a.cancelToken&&!a.immediate)&&(a.action={caption:"Cancel",url:"paymonthly/mytariffandboltons/cancelboltonchange?boltonIdToCancel="+a.id},each(a.exclusiveGroups,function(b){each(c,function(c){each(c.exclusiveGroups,function(g){a.id!=c.id&&b===g&&(!c.o2WebDaily&&"Pending for addition"===c.status)&&(a.action=null)})})}))})}
function PaymBoltons(a){this.myboltonList=[];this.myCoreOrPromotionalDataBoltonList=[];this.myDataBoltonList=[];this.otherBoltOnsCount=this.dataBoltOnsCount=0;this.reasonForPendingRemoval=!1;this.groupedMyBoltonList=[];this.groupedMyDataBoltonList=[];for(var b=0;b<a.length;b++)if("CORE_DATA"===a[b].category||"PROMOTIONAL"===a[b].category)"CORE_DATA"===a[b].category&&(this.hasCoreDataBolton=!0),"ACTIVE"==a[b].status&&(this.hasActiveCoreOrPromotionalDataBolton=!0),this.myCoreOrPromotionalDataBoltonList.push(new PaymBolton(a[b])),
this.hasCoreOrPromotionalDataBolton=!0,this.dataBoltOnsCount++;else if("DATA"===a[b].category){var c=new PaymBolton(a[b]);this.myDataBoltonList.push(c);this.reasonForPendingRemoval|=c.reasonForPendingRemoval;this.dataBoltOnsCount++}else c=new PaymBolton(a[b]),this.myboltonList.push(c),this.reasonForPendingRemoval|=c.reasonForPendingRemoval,this.otherBoltOnsCount++;this.error=a.error;this.collapsed=!0;this.title=getTitle(this);if(2==this.myCoreOrPromotionalDataBoltonList.length&&(a=this.myCoreOrPromotionalDataBoltonList,
"CORE_DATA"===a[0].category&&"CORE_DATA"===a[1].category&&("Pending for addition"===a[0].status&&"Pending for removal"===a[1].status||"Pending for removal"===a[1].status&&"Pending for addition"===a[1].status)))this.hasSwappedCoreDataBoltOn=!0;getIsMutexWithAnyPendingAdditionBoltOn(this.myCoreOrPromotionalDataBoltonList,this.myboltonList);getIsMutexWithAnyPendingAdditionBoltOn(this.myboltonList,this.myCoreOrPromotionalDataBoltonList);this.allBoltonsList=[];this.myDataBoltonAndOtherBoltonsList=[];for(a=
0;a<this.myCoreOrPromotionalDataBoltonList.length;a++)this.allBoltonsList.push(this.myCoreOrPromotionalDataBoltonList[a]);for(a=0;a<this.myDataBoltonList.length;a++)this.allBoltonsList.push(this.myDataBoltonList[a]),this.myDataBoltonAndOtherBoltonsList.push(this.myDataBoltonList[a]);for(a=0;a<this.myboltonList.length;a++)this.allBoltonsList.push(this.myboltonList[a]),this.myDataBoltonAndOtherBoltonsList.push(this.myboltonList[a]);this.groupedMyBoltonList=groupBy(this.myboltonList,"category");this.groupedMyDataBoltonList=
groupBy(this.myDataBoltonList,"category")}
function DirectDebit(){this.form={};this.form.accountNumber;this.form.sortCodeFirstPart;this.form.sortCodeSecondPart;this.form.sortCodeThirdPart;this.form.pin;this.pinValid=this.sortCodeValid=this.accountNumberFormatValid=!0;this.saveDisabled=this.invalidAccountNumber=!1;this.validateDirectDebitForm=function(){this.pinError=void 0;this.accountNumberFormatValid=/^[0-9]{8,9}$/.test(this.form.accountNumber);var a=/^[0-9]{2}$/;this.sortCodeValid=a.test(this.form.sortCodeFirstPart)&&a.test(this.form.sortCodeSecondPart)&&
a.test(this.form.sortCodeThirdPart);this.pinValid=/^[0-9]{4}$/.test(this.form.pin);this.saveDisabled=!(this.accountNumberFormatValid&&this.sortCodeValid&&this.pinValid);this.setFocusOnAccountNumber=!this.accountNumberFormatValid;this.setFocusOnSortCode=!this.setFocusOnAccountNumber&&!this.sortCodeValid;this.setFocusOnPin=!this.setFocusOnAccountNumber&&!this.setFocusOnSortCode&&!this.pinValid};this.handleSortCodeFocusForFirstField=function(){2==this.form.sortCodeFirstPart.length&&(this.setFocusOnSecondSortCode=
!0,this.setFocusOnThirdSortCode=!1)};this.handleSortCodeFocusForSecondField=function(){2==this.form.sortCodeSecondPart.length&&(this.setFocusOnSecondSortCode=!1,this.setFocusOnThirdSortCode=!0)};this.handlePostResponse=function(a,b){b.pinValidationFailed?(this.pinError=new PinError(b),a.status=this.pinError.hasExceededMaximumAttempts?"maxAttemptsError":"form",this.form.pin="",this.setFocusOnPin=!0):b.invalidAccountNumber?(this.invalidAccountNumber=!0,this.form.pin="",this.setFocusOnAccountNumber=
!0,a.status="form"):b.error?a.status="error":"true"==b&&(a.status="success")}}ChangePinView=function(a){if(void 0===a||"form-entry"!=a)throw"undefined or unsupported state";this.actOnState(a)};
ChangePinView.prototype={setState:function(a,b){if(void 0===a||!/^form-submit|success|failed|existing-pin-invalid$/.test(a))throw"undefined or unsupported state";this.actOnState(a,b)},actOnState:function(a,b){switch(a){case "form-entry":case "success":case "failed":this.init();break;case "existing-pin-invalid":this.existingPin="",this.showExistingPinFormatError=this.existingPinFormatValid=this.existingPinValid=!1,this.existingPinErrors=new PinError(b),this.setFocusOnExistingPin=!0}this.state=a},init:function(){this.pin=
"";this.showPinError=this.pinValid=!1;this.confirmPin="";this.showConfirmPinError=this.confirmPinValid=!1;this.existingPin="";this.existingPinValid=!0;this.showExistingPinFormatError=this.existingPinFormatValid=!1},validate:function(){this.existingPinErrors=void 0;this.pinValid=/^[0-9]{4}$/.test(this.pin);this.showPinError=!this.pinValid&&this.pin&&4==this.pin.length;this.confirmPinValid=this.pinValid&&this.pin===this.confirmPin;this.showConfirmPinError=this.pinValid&&!this.confirmPinValid&&this.confirmPin&&
4==this.confirmPin.length;this.existingPinFormatValid=/^[0-9]{4}$/.test(this.existingPin);this.showExistingPinFormatError=!this.existingPinFormatValid&&this.existingPin&&4==this.existingPin.length;this.existingPin&&0<this.existingPin.length&&(this.existingPinValid=!0)}};
function SwappableBoltons(a,b){b.error?a.status="error":(a.status="success",jQuery.isEmptyObject(b.swappableBoltOnsForTariff)?this.boltonSection="NO_BOLTONS":(this.allCoreDataBoltOns=b.swappableBoltOnsForTariff.allCoreDataBoltOns,this.allPromotionalBoltOns=b.swappableBoltOnsForTariff.promotionalBoltOns,this.currentBoltOn=b.currentBoltOn,this.webDailyBolton=b.swappableBoltOnsForTariff.webDailyBoltOn,this.boltonSection=null,this.deviceChangeWarningMessage="",this.deviceTypes=[],this.coreDataBoltOnsForDevice=
[],this.selectedBolton=null,this.webDailyCoreDataBoltonsList=[],this.selectedDevice=null,this.hasWebDailyBoltOnForSelectedDeviceType=!1,0!=filter(this.allCoreDataBoltOns,function(a){return!a.o2WebDaily},this).length?(this.boltonSection="CORE_DATA",getDeviceTypeDescription(this.currentBoltOn.deviceType),each(b.swappableBoltOnsForTariff.deviceTypes,function(a){a={name:a,description:getDeviceTypeDescription(a)};this.deviceTypes.push(a);this.currentBoltOn.deviceType===a.name&&(this.selectedDevice=a)},
this),this.prepareSwappableCoreBoltOnsListForSelctedDevice(this.selectedDevice.name),this.hasWebDailyBoltOnFor(this.selectedDevice.name)):this.allPromotionalBoltOns&&0!=this.allPromotionalBoltOns.length?this.boltonSection="PROMOTIONAL":this.webDailyBolton&&(this.boltonSection="WEB_DAILY")))}
SwappableBoltons.prototype.prepareSwappableCoreBoltOnsListForSelctedDevice=function(a){this.coreDataBoltOnsForDevice="SMARTPHONE"===a||"STANDARD"===a?filter(this.allCoreDataBoltOns,function(a){return("SMARTPHONE"===a.deviceType||"STANDARD"===a.deviceType)&&!a.o2WebDaily},this):filter(this.allCoreDataBoltOns,function(b){return b.deviceType===a&&!b.o2WebDaily},this)};
SwappableBoltons.prototype.hasWebDailyBoltOnFor=function(a){this.hasWebDailyBoltOnForSelectedDeviceType=!1;this.webDailyCoreDataBoltonsList="SMARTPHONE"===a||"STANDARD"===a?filter(this.allCoreDataBoltOns,function(a){return("SMARTPHONE"===a.deviceType||"STANDARD"===a.deviceType)&&a.o2WebDaily},this):filter(this.allCoreDataBoltOns,function(b){return b.deviceType===a&&b.o2WebDaily},this);0!=this.webDailyCoreDataBoltonsList.length&&(this.hasWebDailyBoltOnForSelectedDeviceType=!0)};
SwappableBoltons.prototype.detectDeviceChange=function(){this.selectedBolton=null;this.deviceChangeWarningMessage="";this.prepareSwappableCoreBoltOnsListForSelctedDevice(this.selectedDevice.name);this.hasWebDailyBoltOnFor(this.selectedDevice.name);"IPHONE"===this.currentBoltOn.deviceType&&"IPHONE"!=this.selectedDevice.name&&(this.deviceChangeWarningMessage="As you've selected '"+this.selectedDevice.description+"' this means you won't have access to some iPhone features.");"BLACKBERRY"===this.currentBoltOn.deviceType&&
"BLACKBERRY"!=this.selectedDevice.name&&(this.deviceChangeWarningMessage="As you've selected '"+this.selectedDevice.description+"' this means you won't have access to some Blackberry features.")};function getDeviceTypeDescription(a){if("IPHONE"===a)return"iPhone";if("BLACKBERRY"===a)return"BlackBerry";if("SMARTPHONE"===a)return"Smartphone";if("STANDARD"===a)return"Standard phone"}
function CreatePin(a,b){b.error?(a.status="error",a.showCallToAction=!1):(a.showCallToAction=!0,a.status="success",this.pinCreated=b.pinCreated)}
function CreatePinState(){this.pin="";this.showPinError=this.pinValid=!1;this.confirmPin="";this.showConfirmPinError=this.confirmPinValid=!1;this.validate=function(){this.confirmPinValid=(this.pinValid=/^[0-9]{4}$/.test(this.pin))&&this.pin===this.confirmPin;this.showPinError=!this.pinValid&&4==this.pin.length;this.showConfirmPinError=this.pinValid&&!this.confirmPinValid&&4==this.confirmPin.length}}
function PaymentDetails(a,b){b.pinValidationFailed?(a.pinError=new PinError(b),a.status=a.pinError.hasExceededMaximumAttempts?"maxAttemptsError":"success",a.view="validatePin",a.setFocused=!0):b.error?a.status="error":(a.status="success",this.paymentDetails=b,a.view="paymentDetails")}function PinValidationForm(){this.pin;this.pinValid=this.showPinError=!1;this.isPinValid=function(){this.pinValid=/^[0-9]{4}$/.test(this.pin);this.showPinError=!this.pinValid&&this.pin&&4==this.pin.length}}
function PaymentType(a,b){b.error?a.status="error":b.hasExceededMaximumAttempts?a.status="maxAttemptsError":(a.status="success",this.paymentType=b.paymentType,this.userHasPin=b.userHasPin)}function PinError(a){this.pinValidationFailed=a.pinValidationFailed;this.hasExceededMaximumAttempts=a.hasExceededMaximumAttempts;this.message=a.message;this.remainingPinAttempts=a.remainingPinAttempts}
function PendingTariff(a,b){b.error?a.status="error":(a.status="success",this.boltons=b.coreDataOrPromotionalBoltOns?b.coreDataOrPromotionalBoltOns.concat(b.boltOnsOtherThanCoreDataAndPromotional):b.boltOnsOtherThanCoreDataAndPromotional,this.startDate=b.startDate,this.endDate=b.endDate,this.monthlyFee=b.monthlyFee?b.monthlyFee.valueInPence:void 0,this.tariffName=b.tariffName,this.minimumTermInMonths=b.minimumTermInMonths,this.description=b.tariffDescription,this.cancelToken=b.cancelToken);a.getBoltonBillingInterval=
function(a){if(a==="MONTHLY")return"per month";if(a==="ONE_OFF")return"one-off"}}function PaperFreeBilling(a,b){b.error?(a.status="error",a.showCallToAction=!1):(a.showCallToAction=!0,a.status="success",this.isPaperFreeBilling=b.status)}ResetPinView=function(a){if(void 0===a||"form-entry"!=a)throw"undefined or unsupported state";this.actOnState(a)};
ResetPinView.prototype={setRemainingAttempts:function(a){this.remainingAttempts=a},setState:function(a){if(void 0===a||!/^form-submit|success|failed|payment-number-invalid|payment-details-loacked$/.test(a))throw"undefined or unsupported state";this.actOnState(a)},actOnState:function(a){switch(a){case "form-entry":case "success":case "failed":case "payment-details-loacked":this.init();break;case "payment-number-invalid":this.paymentNumber="",this.showPaymentNumberFormatError=this.paymentNumberFormatValid=
this.paymentNumberValid=!1,this.setFocusOnPaymentNumber=!0}this.state=a},init:function(){this.pin="";this.showPinError=this.pinValid=!1;this.confirmPin="";this.showConfirmPinError=this.confirmPinValid=!1;this.paymentNumber="";this.paymentNumberValid=!0;this.showPaymentNumberFormatError=this.paymentNumberFormatValid=!1;this.remainingAttempts=3},validate:function(){this.pinValid=/^[0-9]{4}$/.test(this.pin);this.showPinError=!this.pinValid&&this.pin&&4==this.pin.length;this.confirmPinValid=this.pinValid&&
this.pin===this.confirmPin;this.showConfirmPinError=this.pinValid&&!this.confirmPinValid&&this.confirmPin&&4==this.confirmPin.length;this.paymentNumberFormatValid=/^[0-9]{4}$/.test(this.paymentNumber);this.showPaymentNumberFormatError=!this.paymentNumberFormatValid&&this.paymentNumber&&4==this.paymentNumber.length;this.paymentNumber&&0<this.paymentNumber.length&&(this.paymentNumberValid=!0)}};function CreditCardDetails(){this.cardType;this.cardNumber;this.expiryMonth;this.expiryYear;this.pin}
function CreditCardDetailsPostForm(a){this.cardType=a.cardType;this.cardNumber=a.cardNumber;this.expiryMonth=a.expiryMonth.month;this.lastTwoDigitsOfExpiryYear=a.expiryYear;this.pin=a.pin}
function CreditCard(a){this.creditCardDetails=new CreditCardDetails;this.validations=new Validations;var b=parseInt(a("date")(new Date,"yy")),c=parseInt(a("date")(new Date,"MM"));this.months=getMonthValues();this.years=getYearsFromCurrentYear(b,10);this.cardTypes=["VISA","Mastercard"];this.validateCardType=function(){-1<$.inArray(this.creditCardDetails.cardType,this.cardTypes)?(this.validations.isCardTypeValid=!0,this.validations.showCardTypeError=!1):(this.validations.isCardTypeValid=!1,this.validations.showCardTypeError=
!0);this.validations.showCardNumberError=!1};this.validateNumber=function(){this.creditCardDetails.cardNumber?"VISA"==this.creditCardDetails.cardType?this.validatePattern(/^4([0-9]{12}|[0-9]{15})$/):"Mastercard"==this.creditCardDetails.cardType&&this.validatePattern(/^5[0-9]{15}$/):(this.validations.isCreditCardNumberValid=!1,this.validations.showCardNumberError=!this.validations.isCreditCardNumberValid)};this.validatePattern=function(a){this.validations.isCreditCardNumberValid=a.test(this.creditCardDetails.cardNumber);
this.validations.showCardNumberError=!this.validations.isCreditCardNumberValid};this.checkPastDate=function(){this.validations.isExpiryDateValid=!this.creditCardDetails.expiryMonth||!this.creditCardDetails.expiryYear||this.creditCardDetails.expiryYear==b&&this.creditCardDetails.expiryMonth.month<c?!1:!0;this.validations.showExpiryDateError=!this.validations.isExpiryDateValid};this.validatePin=function(){this.validations.isPinValid=this.creditCardDetails.pin&&/^[0-9]{4}$/.test(this.creditCardDetails.pin);
this.validations.showPinError=!this.validations.isPinValid};this.validateAll=function(){this.pinError=void 0;this.validateCardType();this.validateNumber();this.checkPastDate();this.validatePin();this.setFocus()};this.setFocus=function(){this.setFocusOnCreditCardNumber=!this.validations.isCreditCardNumberValid;this.setFocusOnPin=!this.setFocusOnCreditCardNumber&&!this.validations.isPinValid};this.handlePostResponse=function(a,b){b.pinValidationFailed?(this.pinError=new PinError(b),a.status=this.pinError.hasExceededMaximumAttempts?
"maxAttemptsError":"form",a.setEnterPinFocused=!0,this.creditCardDetails.pin=void 0,this.setFocusOnPin=!0):b.invalidCreditCardNumber?(a.invalidCreditCardNumber=!0,a.status="form",this.creditCardDetails.pin=void 0,this.setFocusOnCreditCardNumber=!0):b.error?a.status="error":"true"==b&&(a.status="success")}}
function Validations(){this.isPinValid=this.showPinError=this.showExpiryDateError=this.showCardTypeError=this.isExpiryDateValid=this.isCardTypeValid=this.showCardNumberError=this.isCreditCardNumberValid=!1}function Month(a){this.month=a;this.monthText=10>a?"0"+a:a.toString()}function getMonthValues(){var a=[];for(month=1;12>=month;month++)a.push(new Month(month));return a}function getYearsFromCurrentYear(a,b){var c=[];for(year=a;year<=a+b;year++)c.push(year);return c}
function SwappableO2TravelBolton(a,b){b.error?a.status="error":(a.status="success",this.name=b.name,this.id=b.id,this.description=b.description,this.monthlyFee=b.monthlyFee?b.monthlyFee:null)}function SwappableTravelBolton(a,b){b.error?(a.status="error",a.showCallToAction=!1):(a.showCallToAction=!0,a.status="success",this.swappableBoltOnsList=b,this.hasSwappableTravelBolton=(this.swappableTravelBolton=filter(this.swappableBoltOnsList,function(a){return"9003"===a.id}))?!0:!1)}
function Rewards(a,b){b.error?(a.status="error",a.showCallToAction=!1):(a.showCallToAction=!0,a.status="success",this.rewards=b)}
function DesktopPaygBoltons(a){this.dataBoltons=[];this.otherBoltons=[];this.otherBoltOnsCount=this.dataBoltOnsCount=0;this.hasPendingRechargeBolton=!1;for(var b=0;b<a.length;b++){var c=a[b];if("ACTIVE"==c.status||"PENDING_RECHARGE"==c.status)"WAP"==c.boltOnCategory?(this.dataBoltons.push(new DesktopPaygBolton(a[b])),this.dataBoltOnsCount++):(this.otherBoltons.push(new DesktopPaygBolton(a[b])),this.otherBoltOnsCount++);this.hasPendingRechargeBolton||(this.hasPendingRechargeBolton="PENDING_RECHARGE"==
c.status?!0:!1)}}function DesktopPaygBolton(a){this.name=a.name;this.status=a.status;this.billingInterval=function(a){if("MONTHLY"==a)return"per month";if("ONE_OFF"==a)return"one-off"}(a.billingInterval);this.boltOnFee=function(a,c,d){if("MONTHLY"==a)return c?c.valueInPence:null;if("ONE_OFF"==a)return d?d.valueInPence:null}(a.billingInterval,a.monthlyCost,a.oneOffCost)}
function TopupHistory(a,b){b.error?(a.status="error",a.showCallToAction=!1):(a.showCallToAction=!0,a.status="success",this.topUps=b)}
function TariffDetails(a,b){var c=defaultProperties.widgets.payg.tariffdetails;b.error?a.status="error":(a.status="success",this.name=b.currentTariff?b.currentTariff.tariffName:null,this.description=b.currentTariff?b.currentTariff.description:null,this.status=b.currentTariff?"ACTIVE"==b.currentTariff.accountStatus||"PENDING_RECHARGE"==b.currentTariff.accountStatus?c.status[b.currentTariff.accountStatus]:"PENDING_REMOVAL"==b.currentTariff.accountStatus?null==b.currentTariff.nextPaymentDate?c.status.OTHER:
b.currentTariff.nextPaymentDateIsInPast?c.status[b.currentTariff.accountStatus].nextPaymentDateInPast:c.status[b.currentTariff.accountStatus].nextPaymentDateNotInPast:c.status.OTHER:null,this.allowanceText=getAllowanceText(b),this.anniversaryDate=b.anniversaryDate,this.canHoldConfigurablePostcode=0<b.currentTariff.maxParametersAllowed)}
function PendingTariffDetails(a,b){b.error?a.status="error":(a.status="success",this.name=b.pendingTariff?b.pendingTariff.tariffName:null,this.description=b.pendingTariff?b.pendingTariff.description:null,this.status="To be added on anniversary date",this.anniversaryDate=b.anniversaryDate,this.startDate=b.pendingTariff.startDate,this.startDateWithinAMonthFromToday=b.pendingTariff.startDateWithinAMonthFromToday)}angular.module("phoneDetailsService",[]).service("phoneDetailsService",["$http",function(a){return{getSummary:function(b){a.get(defaultProperties.serviceEndpoints.common.phoneDetails).success(function(a){b(a)}).error(function(){b({error:!0})})}}}]);
angular.module("myOrdersService",[]).service("myOrdersService",["$http",function(a){return{getOrders:function(b){a.get(defaultProperties.serviceEndpoints.common.myOrders).success(function(a){b(a)}).error(function(){b({error:!0})})}}}]);
angular.module("offersService",[]).service("offersService",["$http",function(a){return{getOffers:function(b,c){a.get(defaultProperties.serviceEndpoints.common.offers).success(function(a){b(a)}).error(function(){c()})},setOfferPreferences:function(b,c,d){a.post(defaultProperties.serviceEndpoints.common.offers,{selectedOfferId:b.selectedOfferId,selectedAction:b.selectedAction},{headers:{"Content-Type":"application/json"}}).success(function(){c()}).error(function(){d()})}}}]);
angular.module("paperFreeBillingService",[]).service("paperFreeBillingService",["$http",function(a){return{getStatus:function(b){a.get(defaultProperties.serviceEndpoints.paym.getPaperFreeBilling).success(function(a){b(a)}).error(function(){b({error:!0})})},setStatus:function(b){a.post(defaultProperties.serviceEndpoints.paym.setPaperFreeBilling,{paperFreeBills:!0},{headers:{"Content-Type":"application/json"}}).success(function(a){b(a)}).error(function(){b({error:!0})})}}}]);
angular.module("swappableTravelBoltOnService",[]).service("swappableTravelBoltOnService",["$http",function(a){return{getSwappableBoltOns:function(b){a.get(defaultProperties.serviceEndpoints.paym.getswappabletravelboltons).success(function(a){b(a)}).error(function(){b({error:defaultProperties.errorMessage})})}}}]);angular.module("paymBoltonsService",[]).service("paymBoltonsService",["$http",function(a){return{getBoltonsSummary:function(b){a.get(properties.serviceEndpoints.paym.getBoltonsSummary).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})}}}]);
angular.module("securityPinService",[]).service("securityPinService",["$http",function(a){return{createPin:function(b,c){a.post(defaultProperties.serviceEndpoints.paym.createPin,b).success(function(a){c(a)}).error(function(){c({error:!0})})},resetPin:function(b,c,d){a.put(defaultProperties.serviceEndpoints.paym.resetPin,{newPin:b,paymentNumber:c}).success(function(){d("success")}).error(function(a,b){412==b?d("payment-number-invalid",a.remainingAttempts):403==b?d("payment-details-loacked"):d("failed")})},
changePin:function(b,c,d){a.put(defaultProperties.serviceEndpoints.paym.changePin,{newPin:b,existingPin:c}).success(function(a){d("success",a)}).error(function(a,b){403==b?d("existing-pin-invalid",a):d("failed",a)})}}}]);angular.module("pendingTariffService",[]).service("pendingTariffService",["$http",function(a){return{getPendingTariffDetail:function(b){a.get(defaultProperties.serviceEndpoints.paym.getpendingtariff).success(function(a){b(a)}).error(function(){b({error:defaultProperties.errorMessage})})}}}]);
angular.module("paymentDetailsService",[]).service("paymentDetailsService",["$http",function(a){var b={},c,d,e;b.validatePin=function(b,c){e=!1;a.post(defaultProperties.serviceEndpoints.paym.validatePin,b).success(function(a){c(a);d=a;e=!0}).error(function(a,b){403==b?c(a):c({error:!0})})};b.getPaymentType=function(b){a.get(defaultProperties.serviceEndpoints.paym.paymentType).success(function(a){b(a);c=a}).error(function(){b({error:!0})})};b.getUserPaymentType=function(){return c};b.getUserPaymentDetails=
function(){return d};b.postCreditCardPaymentDetails=function(b,c){a.post(defaultProperties.serviceEndpoints.paym.paymentdetials.changepaymentdetails.creditcard,b).success(function(a){c(a)}).error(function(a,b){400==b?c({invalidCreditCardNumber:!0}):403==b?c(a):c({error:!0})})};b.postDirectDebitDetails=function(b,c){a.post(defaultProperties.serviceEndpoints.paym.paymentdetials.changepaymentdetails.directdebit,b).success(function(a){c(a)}).error(function(a,b){400==b?c({invalidAccountNumber:!0}):403==
b?c(a):c({error:!0})})};b.hasPinValidated=function(){return e};return b}]);angular.module("swappableBoltOnService",[]).service("swappableBoltOnService",["$http",function(a){return{getSwappableBoltOns:function(b){a.get(defaultProperties.serviceEndpoints.paym.getswappableboltons).success(function(a){b(a)}).error(function(){b({error:defaultProperties.errorMessage})})},getO2TravelSwappableBoltOns:function(b){a.get(defaultProperties.serviceEndpoints.paym.getswappableo2travelboltons).success(function(a){b(a)}).error(function(){b({error:defaultProperties.errorMessage})})}}}]);
angular.module("rewardsService",[]).service("rewardsService",["$http",function(a){return{getRewards:function(b){a.get(defaultProperties.serviceEndpoints.payg.rewards).success(function(a){b(a)}).error(function(){b({error:!0})})}}}]);angular.module("tariffDetailsService",[]).service("tariffDetailsService",["$http",function(a){return{getDetails:function(b){a.get(properties.serviceEndpoints.payg.getTariffDetails).success(function(a){b(a)}).error(function(){b({error:properties.errorMessage})})}}}]);
angular.module("topupService",[]).service("topupService",["$http",function(a){return{getHistory:function(b){a.get(defaultProperties.serviceEndpoints.payg.topuphistory).success(function(a){b(a)}).error(function(){b({error:!0})})}}}]);
angular.module("offersModule",["ngRoute"]).controller("offersController.getOffers",["$scope","$rootScope","offersService",function(a,b,c){a.getOffers=function(){a.offerAcceptanceStatus="loading";c.getOffers(function(b){a.offers=(new Offers(a,b)).offers;a.useCommon=!0},function(){a.offers=(new Offers(a,[])).offers})};a.getOffers();a.setOfferPreferences=function(d,e,f,g){offerPreference=new OfferPreference(d,e);c.setOfferPreferences(offerPreference,function(){"negative"==e?a.offerAcceptanceStatus="negative":
"positive"==e&&(a.offerAcceptanceStatus="positive");$($.find(".overlay-close")[0]).bind("click",function(){if(f!=void 0)if(g==true){window.open(f,"_blank");window.location.replace(MYMOBILE_BASE_URL+"myoffers/offers?disambiguation_id="+b.disambiguationId)}else window.location.replace(MYMOBILE_BASE_URL+f);else window.location.replace(MYMOBILE_BASE_URL+"myoffers/offers?disambiguation_id="+b.disambiguationId)})},function(){a.offerAcceptanceStatus="error"})}}]);
angular.module("myo2-desktop","compile ngAnimate myo2Filters myo2Directives ngSanitize widgetModule userDetailsService userDetailsModule myLatestBillDetailsService myLatestBillModule recentChargesService myRecentChargesModule myAllowancesModule allowancesService allowanceDetailsModule upgradeEligibilityModule upgradeEligibilityService payMonthlyTariffService myTariffSummaryModule paygAccountSummaryService myTariffDetailsModule myBoltonsModule myBoltonsService phoneDetailsModule phoneDetailsService myOrdersModule myOrdersService viewPaymentDetailsModule paymentDetailsService balanceAndAllowanceSummaryModule paygAccountSummaryService topupModule topupService paperFreeBillingModule paperFreeBillingService desktopBoltonsModule paygBoltonsService rewardsModule rewardsService myPhonePlanModule myPhonePlanService securityPinService tariffDetailsModule boltonsSummaryModule tariffModule pendingTariffService myCallingPlanSummaryModule changePaymentDetailsModule offersService offersModule paymBoltonsModule paymBoltonsService swappableTravelBoltOnService swappableTravelBoltOnModule swappableBoltOnModule swappableBoltOnService tariffDetailsService".split(" ")).config(["$routeProvider",function(a){a.when("/bills",
{templateUrl:"templates/default/paym/billdetailshome.html"})}]).run(["$rootScope","$location","$anchorScroll",function(a,b,c){a.$on("$routeChangeSuccess",function(){c()});-1!=b.$$absUrl.indexOf("mymobile/paymonthly/bills")&&b.path("/bills").replace()}]).controller("rootController",["$rootScope","$location",function(a,b){a.defaultProperties=defaultProperties;a.pageLoading=!0;a.properties=properties;a.location=b.$$absUrl;a.disambiguationId=getParameterByName("disambiguation_id");a.getModuleProperties=
function(a,b){return b?defaultProperties.widgets.common[a]:defaultProperties.widgets[USER_TYPE][a]}}]).config(["$httpProvider",function(a){a.interceptors.push(["$q","$location","$rootScope",function(a,c,d){return{request:function(c){var f=d.disambiguationId;null!=f&&(-1==c.url.indexOf("_assets")&&-1==c.url.indexOf(".svg"))&&(c.url=c.url+"?disambiguation_id="+f);return c||a.when(c)},responseError:function(c){401==c.status&&(window.location.href=c.headers("loginPageUrl"));return a.reject(c)}}}])}]).run(["$rootScope",
"$location","$anchorScroll",function(a){a.svgSupported=Modernizr.svg}]);function getParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function isEmpty(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}
angular.element(document).ready(function(){addSecondaryNavMarkup();angular.element(window).on("resize",function(){0===jQuery("#header-consumer").find("#nav-secondary").length&&(jQuery(".nav-primary").after('<nav id="nav-secondary" class="js-injection"><div class="grid-inner"><ul></ul></div></nav>'),addSecondaryNavMarkup());jQuery("#nav-secondary").show()})});
function addSecondaryNavMarkup(){jQuery("#secondoryNav div").clone().appendTo(jQuery("#nav-secondary > div > ul"));jQuery(".nav-consumer").on("click",".show-more",showMore);jQuery("#nav-secondary").on("click","a",reloadPage);var a=jQuery("#nav-secondary").find(".show-more");jQuery("#nav-secondary").show();a.on("mouseenter focusin",showMoreSecondary);a.on("mouseleave",hideMoreSecondary);a.on("focusout","a",hideMoreSecondaryOnFocusOut)}
function each(a,b,c){if(a)for(var d=0;d<a.length&&b;d++)b.call(c,a[d],d)}function filter(a,b,c){var d=[];if(null==a)return d;if(!b)return a;each(a,function(a,f,g){b.call(c,a,f,g)&&d.push(a)});return d}function merge(a,b){var c=[];each(a,function(a){c.push(a)});each(b,function(a){c.push(a)});return c}
angular.module("phoneDetailsModule",["ngRoute"]).controller("phoneDetailsController.getSummary",["$scope","phoneDetailsService",function(a,b){b.getSummary(function(b){a.phoneDetails=new PhoneDetails(a,b)})}]);angular.module("myOrdersModule",[]).controller("myOrdersController.getRecentOrders",["$scope","myOrdersService",function(a,b){b.getOrders(function(b){a.myRecentOrders=new MyRecentOrders(a,b)})}]);
angular.module("changePaymentDetailsModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/changepaymentdetails",{controller:"changePaymentDetailsController.changepaymentdetailsInit",templateUrl:ASSET_URL+"templates/default/paym/changepaymentdetails.html"}).otherwise({redirectTo:"/bills"})}]).controller("changePaymentDetailsController.changepaymentdetailsInit",["$scope","$location","paymentDetailsService",function(a,b,c){c.hasPinValidated()?(a.payment=new PaymentType(a,c.getUserPaymentType()),
a.paymentDetails=(new PaymentDetails(a,c.getUserPaymentDetails())).paymentDetails,a.status="form"):b.path("/bills")}]).controller("changeCreditCardDetailsController.setupCreditCardForm",["$scope","$filter","paymentDetailsService",function(a,b,c){a.creditCard=new CreditCard(b);a.postCreditCardPaymentDetails=function(){a.pinValidationFailed=!1;a.invalidCreditCardNumber=!1;a.creditCard.validateAll();a.creditCard.validations.isCardTypeValid&&(a.creditCard.validations.isCreditCardNumberValid&&a.creditCard.validations.isExpiryDateValid&&
a.creditCard.validations.isPinValid)&&(a.status="loading",c.postCreditCardPaymentDetails(new CreditCardDetailsPostForm(a.creditCard.creditCardDetails),function(b){a.creditCard.handlePostResponse(a,b)}))}}]).controller("changeDirectDebitDetailsController.setupDirectDebitForm",["$scope","paymentDetailsService",function(a,b){a.directDebit=new DirectDebit;a.updateDirectDebitDetails=function(){a.directDebit.pinVerificationFailed=!1;a.directDebit.invalidAccountNumber=!1;a.directDebit.validateDirectDebitForm();
a.directDebit.saveDisabled||(a.status="loading",b.postDirectDebitDetails(a.directDebit.form,function(b){a.directDebit.handlePostResponse(a,b)}))}}]);
angular.module("paymBoltonsModule",["ngRoute"]).controller("paymBoltonsController.getBoltonsSummary",["$rootScope","$scope","paymBoltonsService",function(a,b,c){a.paymBoltons||c.getBoltonsSummary(function(c){0!=c.length?(a.paymBoltons=new PaymBoltons(c),b.showCallToAction=0==a.paymBoltons.myCoreOrPromotionalDataBoltonList.length&&0==a.paymBoltons.myDataBoltonList.length&&0==a.paymBoltons.myboltonList.length?!1:!0):b.showCallToAction=!1;b.status=c.error?"error":"success"})}]);
angular.module("viewPaymentDetailsModule",["ngRoute"]).config(["$routeProvider",function(a){a.when("/createpin",{controller:"viewPaymentDetailsController.createPin",templateUrl:ASSET_URL+"templates/default/paym/setuppin.html"}).when("/resetpin",{controller:"viewPaymentDetailsController.resetPin",templateUrl:ASSET_URL+"templates/default/paym/resetpin.html"}).when("/changepin",{controller:"viewPaymentDetailsController.changePin",templateUrl:ASSET_URL+"templates/default/paym/changepin.html"}).otherwise({redirectTo:"/bills"})}]).controller("viewPaymentDetailsController.getPaymentType",
["$scope","paymentDetailsService",function(a,b){b.getPaymentType(function(b){a.paymentType=new PaymentType(a,b);a.view="validatePin";a.$broadcast("success")});a.pinForm=new PinValidationForm;a.postPin=function(){a.status="loading";b.validatePin(a.pinForm.pin,function(b){b.pinValidationFailed&&(a.pinForm.pin="",a.pinForm.pinValid=!1);a.paymentDetails=(new PaymentDetails(a,b)).paymentDetails})}}]).controller("viewPaymentDetailsController.createPin",["$scope","securityPinService",function(a,b){a.createPinState=
new CreatePinState;a.createPin=function(c){a.status="loading";b.createPin(c,function(b){a.createpin=new CreatePin(a,b)})}}]).controller("viewPaymentDetailsController.resetPin",["$scope","securityPinService",function(a,b){a.resetPinView=new ResetPinView("form-entry");a.submitResetPin=function(){a.resetPinView.setState("form-submit");b.resetPin(a.resetPinView.pin.toString(),a.resetPinView.paymentNumber.toString(),function(b,d){a.resetPinView.setState(b);d&&a.resetPinView.setRemainingAttempts(d)})}}]).controller("viewPaymentDetailsController.changePin",
["$scope","securityPinService",function(a,b){a.changePinView=new ChangePinView("form-entry");a.submitChangePin=function(){a.changePinView.setState("form-submit");b.changePin(a.changePinView.pin.toString(),a.changePinView.existingPin.toString(),function(b,d){a.changePinView.setState(b,d)})}}]);
angular.module("swappableTravelBoltOnModule",[]).controller("swappableTravelBoltOnController.getSwappableBolton",["$scope","swappableTravelBoltOnService",function(a,b){b.getSwappableBoltOns(function(b){a.swappableTravelBoltOns=new SwappableTravelBolton(a,b)})}]);
angular.module("swappableBoltOnModule",["ngRoute"]).controller("swappableBoltOnController.getSwappableBoltons",["$scope","$window","swappableBoltOnService",function(a,b,c){c.getSwappableBoltOns(function(b){a.swappableBoltOns=new SwappableBoltons(a,b)});a.continueWithSelectedBolton=function(a){b.location.href=a.o2WebDaily?defaultProperties.mymobileBaseUrl+"/paymonthly/mytariffandboltons/removedatabolton?selectedDataBoltOn="+a.id:defaultProperties.mymobileBaseUrl+"/paymonthly/mytariffandboltons/swapdatabolton?selectedDataBoltOn="+
a.id}}]).controller("swappableBoltOnController.getSwappableO2TravelBoltons",["$scope","$window","swappableBoltOnService",function(a,b,c){c.getO2TravelSwappableBoltOns(function(b){a.swappableO2TravelBolton=new SwappableO2TravelBolton(a,b)});a.continueWithSelectedBolton=function(a){b.location.href=defaultProperties.mymobileBaseUrl+"/paymonthly/mytariffandboltons/swaptravelbolton?selectedDataBoltOn="+a.id}}]);
angular.module("tariffModule",[]).controller("tariffController.getPendingTariff",["$scope","pendingTariffService",function(a,b){b.getPendingTariffDetail(function(b){isEmpty(b)||(a.tariffDetail=new PendingTariff(a,b))})}]).controller("tariffController.getCurrentTariff",["$scope","payMonthlyTariffService","pendingTariffService",function(a,b,c){b.getTariffDetail(function(b){a.tariffDetail=new TariffDetail(b);b.error?a.status="error":(a.status="success",a.showCallToAction=!0)});c.getPendingTariffDetail(function(b){isEmpty(b)||
(a.pendingTariff=new PendingTariff(a,b))})}]);
angular.module("paperFreeBillingModule",["ngRoute"]).controller("paperFreeBillingController.getStatus",["$scope","paperFreeBillingService",function(a,b){b.getStatus(function(b){a.paperFreeBilling=new PaperFreeBilling(a,b)})}]).controller("paperFreeBillingController.setStatus",["$scope","paperFreeBillingService",function(a,b){a.paperFreeBillingSelected=function(){a.$paperFreeBilling=!a.paperFreeBilling;var b=document.getElementById("setPaperFreeBilling"),d=document.getElementById("checkbox");d.className=
b.checked?d.className+" checkbox-checked":"custom-checkbox"};a.submitPaperFreeBilling=function(){a.status="loading";b.setStatus(function(b){a.paperFreeBilling=new PaperFreeBilling(a,b)})}}]);angular.module("desktopBoltonsModule",[]).controller("boltonsController.getActiveAndPendingRechargeBoltons",["$scope","paygBoltonsService",function(a,b){b.getBoltons(function(b){b.error?a.status="error":(a.status="success",a.paygBoltons=new DesktopPaygBoltons(b))})}]);
angular.module("rewardsModule",["ngRoute"]).controller("rewardsController.getRewards",["$scope","rewardsService",function(a,b){b.getRewards(function(b){a.rewards=(new Rewards(a,b)).rewards})}]);angular.module("tariffDetailsModule",[]).controller("tariffController.getDetails",["$scope","tariffDetailsService",function(a,b){b.getDetails(function(b){b=b.prepayUserAccount;a.tariffDetails=new TariffDetails(a,b);b.pendingTariff&&(a.pendingTariffDetails=new PendingTariffDetails(a,b))})}]);
angular.module("topupModule",["ngRoute"]).controller("topupController.getHistory",["$scope","topupService",function(a,b){b.getHistory(function(b){a.topupHistory=new TopupHistory(a,b)})}]);